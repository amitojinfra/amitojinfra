"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{6838:function(e,t,a){a.d(t,{Z:function(){return h}});var r=a(5893),s=a(9008),n=a.n(s),o=a(1664),c=a.n(o),i=a(5675),l=a.n(i),d=a(1163),u=a(3615),m=()=>{let e=(0,d.useRouter)(),{user:t,logout:a,loading:s,firebaseConfigured:n}=(0,u.a)(),o=t=>"/attendance"===t?e.pathname.startsWith("/attendance")?"active":"":"/employees"===t?e.pathname.startsWith("/employees")?"active":"":"/payments"===t?e.pathname.startsWith("/payments")?"active":"":"/salary"===t?e.pathname.startsWith("/salary")?"active":"":"/expenses"===t?e.pathname.startsWith("/expenses")?"active":"":e.pathname===t?"active":"",i=async()=>{await a()};return(0,r.jsx)("header",{className:"header",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("nav",{className:"nav",children:[(0,r.jsx)(c(),{href:"/",className:"nav-brand",children:"AmitojInfra"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[(0,r.jsxs)("ul",{className:"nav-links",children:[(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/",className:o("/"),children:"Home"})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/dashboard",className:o("/dashboard"),children:"Dashboard"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/employees",className:o("/employees"),children:"Employees"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/attendance",className:o("/attendance"),children:"Attendance"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/payments",className:o("/payments"),children:"Payments"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/salary",className:o("/salary"),children:"Salary"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/expenses",className:o("/expenses"),children:"Expenses"})})]})]}),(0,r.jsx)("div",{className:"auth-section",children:!s&&(0,r.jsx)(r.Fragment,{children:t?(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.photoURL&&(0,r.jsx)("div",{style:{position:"relative",width:"32px",height:"32px"},children:(0,r.jsx)(l(),{src:t.photoURL,alt:t.displayName||"User",width:32,height:32,style:{borderRadius:"50%",objectFit:"cover"},unoptimized:!0})}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#333",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.displayName||t.email}),(0,r.jsx)("button",{onClick:i,style:{padding:"0.25rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.25rem",cursor:"pointer",color:"#666"},children:"Sign Out"})]}):(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(c(),{href:"/auth",className:"".concat(o("/auth")," auth-link"),style:{padding:"0.5rem 1rem",backgroundColor:"#0070f3",color:"white",borderRadius:"0.25rem",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:"Sign In"}):(0,r.jsx)(c(),{href:"/firebase-setup",className:"".concat(o("/firebase-setup")," auth-link"),style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",borderRadius:"0.25rem",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:"Setup Firebase"})})})})]})]})})})},p=()=>(0,r.jsx)("footer",{className:"footer",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," AmitojInfra. All rights reserved."]}),(0,r.jsx)("p",{children:"Built with Next.js and deployed on GitHub Pages"})]})}),h=e=>{let{children:t,title:a="AmitojInfra - Next.js App",description:s="A Next.js application deployed on GitHub Pages"}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:a}),(0,r.jsx)("meta",{name:"description",content:s}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"main",children:(0,r.jsx)("div",{className:"container",children:t})}),(0,r.jsx)(p,{})]})}},8664:function(e,t,a){a.d(t,{_O:function(){return o},f7:function(){return i}});var r=a(109),s=a(5799);let n={FUEL:"fuel",RAW_MATERIALS:"raw_materials",GROCERIES:"groceries",TEA_SNACKS:"tea_snacks",SAFETY_EQUIPMENT:"safety_equipment",ACCOMMODATION:"accommodation",TRANSPORT:"transport",EMERGENCY:"emergency",SUPERVISOR_TRAVEL:"supervisor_travel",OFFICE_STATIONERY:"office_stationery"},o={[n.FUEL]:"Diesel/Petrol for Tractor, Hydra",[n.RAW_MATERIALS]:"Raw Materials (Cement, Sand)",[n.GROCERIES]:"Groceries for Food",[n.TEA_SNACKS]:"Tea/Snacks",[n.SAFETY_EQUIPMENT]:"Safety Gloves, Helmets, Jackets, Shoes",[n.ACCOMMODATION]:"Rooms/House Rent for Workers",[n.TRANSPORT]:"Transport Charges",[n.EMERGENCY]:"Emergency Purchases",[n.SUPERVISOR_TRAVEL]:"Supervisor Travelling",[n.OFFICE_STATIONERY]:"Office Stationery"},c={CASH:"cash",ONLINE:"online"},i={[c.CASH]:"Cash",[c.ONLINE]:"Online"},l={PENDING:"pending"};class d{get db(){return s.Z.db}convertTimestampToDate(e){return e?e.toDate?e.toDate():new Date(e):null}formatExpenseData(e){return{...e,date:this.convertTimestampToDate(e.date),createdAt:this.convertTimestampToDate(e.createdAt),updatedAt:this.convertTimestampToDate(e.updatedAt)}}validateExpenseData(e){let t={};if(!e.amount||isNaN(e.amount)||0>=parseFloat(e.amount)?t.amount="Amount must be a positive number":parseFloat(e.amount)>1e6&&(t.amount="Amount cannot exceed â‚¹10,00,000"),e.category&&Object.values(n).includes(e.category)||(t.category="Please select a valid category"),e.date){let a=new Date(e.date),r=new Date,s=new Date;s.setFullYear(r.getFullYear()-1),a>r?t.date="Expense date cannot be in the future":a<s&&(t.date="Expense date cannot be more than one year old")}else t.date="Date is required";return e.paymentMode&&Object.values(c).includes(e.paymentMode)||(t.paymentMode="Please select a valid payment mode"),e.vendor&&0===e.vendor.trim().length?t.vendor="Vendor name cannot be empty if provided":e.vendor&&e.vendor.length>100&&(t.vendor="Vendor name cannot exceed 100 characters"),e.description&&e.description.length>500&&(t.description="Description cannot exceed 500 characters"),{isValid:0===Object.keys(t).length,errors:t}}async createExpense(e,t){try{let a=this.validateExpenseData(e);if(!a.isValid)throw Error("Validation failed: ".concat(Object.values(a.errors).join(", ")));let s=new Date,n={amount:parseFloat(e.amount),category:e.category,vendor:e.vendor||null,date:r.EK.fromDate(new Date(e.date)),description:e.description||null,paymentMode:e.paymentMode,status:l.PENDING,createdBy:t,createdAt:r.EK.fromDate(s),updatedAt:r.EK.fromDate(s)},o=await (0,r.ET)((0,r.hJ)(this.db,this.collectionName),n);return{success:!0,id:o.id,message:"Expense created successfully"}}catch(e){return console.error("Error creating expense:",e),{success:!1,error:e.message||"Failed to create expense"}}}async getExpenseById(e){try{let t=(0,r.JU)(this.db,this.collectionName,e),a=await (0,r.QT)(t);if(a.exists())return{success:!0,expense:this.formatExpenseData({id:a.id,...a.data()})};return{success:!1,error:"Expense not found"}}catch(e){return console.error("Error getting expense:",e),{success:!1,error:e.message||"Failed to get expense"}}}async getExpenses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,r.hJ)(this.db,this.collectionName),a=[];if(e.category&&a.push((0,r.ar)("category","==",e.category)),e.paymentMode&&a.push((0,r.ar)("paymentMode","==",e.paymentMode)),e.status&&a.push((0,r.ar)("status","==",e.status)),e.startDate&&a.push((0,r.ar)("date",">=",r.EK.fromDate(new Date(e.startDate)))),e.endDate){let t=new Date(e.endDate);t.setHours(23,59,59,999),a.push((0,r.ar)("date","<=",r.EK.fromDate(t)))}a.push((0,r.Xo)("date","desc")),e.limit&&a.push((0,r.b9)(e.limit)),a.length>0&&(t=(0,r.IO)(t,...a));let s=await (0,r.PL)(t),n=[];return s.forEach(e=>{n.push(this.formatExpenseData({id:e.id,...e.data()}))}),{success:!0,expenses:n,total:n.length}}catch(e){return console.error("Error getting expenses:",e),{success:!1,error:e.message||"Failed to get expenses",expenses:[]}}}async updateExpense(e,t,a){try{let s=this.validateExpenseData(t);if(!s.isValid)throw Error("Validation failed: ".concat(Object.values(s.errors).join(", ")));let n=(0,r.JU)(this.db,this.collectionName,e),o={amount:parseFloat(t.amount),category:t.category,vendor:t.vendor||null,date:r.EK.fromDate(new Date(t.date)),description:t.description||null,paymentMode:t.paymentMode,updatedAt:r.EK.fromDate(new Date),updatedBy:a};return await (0,r.r7)(n,o),{success:!0,message:"Expense updated successfully"}}catch(e){return console.error("Error updating expense:",e),{success:!1,error:e.message||"Failed to update expense"}}}async deleteExpense(e){try{let t=(0,r.JU)(this.db,this.collectionName,e);return await (0,r.oe)(t),{success:!0,message:"Expense deleted successfully"}}catch(e){return console.error("Error deleting expense:",e),{success:!1,error:e.message||"Failed to delete expense"}}}async getDailyExpenseReport(e){try{let t=new Date(e);t.setHours(0,0,0,0);let a=new Date(e);a.setHours(23,59,59,999);let r=await this.getExpenses({startDate:t.toISOString(),endDate:a.toISOString()});if(!r.success)throw Error(r.error);let s=r.expenses,o={totalExpenses:s.length,totalAmount:s.reduce((e,t)=>e+t.amount,0),categoryBreakdown:{},paymentModeBreakdown:{[c.CASH]:0,[c.ONLINE]:0}};return Object.values(n).forEach(e=>{o.categoryBreakdown[e]={count:0,amount:0}}),s.forEach(e=>{o.categoryBreakdown[e.category]&&(o.categoryBreakdown[e.category].count++,o.categoryBreakdown[e.category].amount+=e.amount),o.paymentModeBreakdown.hasOwnProperty(e.paymentMode)&&(o.paymentModeBreakdown[e.paymentMode]+=e.amount)}),{success:!0,date:e,expenses:s,summary:o}}catch(e){return console.error("Error getting daily expense report:",e),{success:!1,error:e.message||"Failed to get daily expense report"}}}async getMonthlyExpenseReport(e,t){try{let a=new Date(e,t-1,1),r=new Date(e,t,0,23,59,59,999),s=await this.getExpenses({startDate:a.toISOString(),endDate:r.toISOString()});if(!s.success)throw Error(s.error);let o=s.expenses,i={},l={totalExpenses:o.length,totalAmount:o.reduce((e,t)=>e+t.amount,0),categoryBreakdown:{},paymentModeBreakdown:{[c.CASH]:0,[c.ONLINE]:0},averageDaily:0};Object.values(n).forEach(e=>{l.categoryBreakdown[e]={count:0,amount:0}}),o.forEach(e=>{let t=e.date.getDate();i[t]||(i[t]={date:e.date.toISOString().split("T")[0],expenses:[],totalAmount:0}),i[t].expenses.push(e),i[t].totalAmount+=e.amount,l.categoryBreakdown[e.category]&&(l.categoryBreakdown[e.category].count++,l.categoryBreakdown[e.category].amount+=e.amount),l.paymentModeBreakdown.hasOwnProperty(e.paymentMode)&&(l.paymentModeBreakdown[e.paymentMode]+=e.amount)});let d=new Date(e,t,0).getDate();return l.averageDaily=l.totalAmount/d,{success:!0,year:e,month:t,monthName:new Date(e,t-1).toLocaleString("default",{month:"long"}),dailyExpenses:i,summary:l}}catch(e){return console.error("Error getting monthly expense report:",e),{success:!1,error:e.message||"Failed to get monthly expense report"}}}async getCategorySummary(e,t){try{let a=await this.getExpenses({startDate:e,endDate:t});if(!a.success)throw Error(a.error);let r=a.expenses,s={};return Object.values(n).forEach(e=>{s[e]={category:e,label:o[e],count:0,totalAmount:0,averageAmount:0,expenses:[]}}),r.forEach(e=>{s[e.category]&&(s[e.category].count++,s[e.category].totalAmount+=e.amount,s[e.category].expenses.push(e))}),Object.keys(s).forEach(e=>{let t=s[e];t.count>0&&(t.averageAmount=t.totalAmount/t.count)}),{success:!0,startDate:e,endDate:t,categorySummary:Object.values(s),totalAmount:r.reduce((e,t)=>e+t.amount,0),totalExpenses:r.length}}catch(e){return console.error("Error getting category summary:",e),{success:!1,error:e.message||"Failed to get category summary"}}}formatCurrency(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}calculateTotalDays(e,t){let a=new Date(e);return Math.ceil((new Date(t).getTime()-a.getTime())/864e5)+1}constructor(){this.collectionName="expenses"}}let u=new d;t.ZP=u}}]);