"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{6838:function(e,t,a){a.d(t,{Z:function(){return h}});var r=a(5893),n=a(9008),s=a.n(n),o=a(1664),c=a.n(o),i=a(5675),l=a.n(i),d=a(1163),u=a(3615),m=()=>{let e=(0,d.useRouter)(),{user:t,logout:a,loading:n,firebaseConfigured:s}=(0,u.a)(),o=t=>"/attendance"===t?e.pathname.startsWith("/attendance")?"active":"":"/employees"===t?e.pathname.startsWith("/employees")?"active":"":"/payments"===t?e.pathname.startsWith("/payments")?"active":"":"/salary"===t?e.pathname.startsWith("/salary")?"active":"":"/expenses"===t?e.pathname.startsWith("/expenses")?"active":"":e.pathname===t?"active":"",i=async()=>{await a()};return(0,r.jsx)("header",{className:"header",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("nav",{className:"nav",children:[(0,r.jsx)(c(),{href:"/",className:"nav-brand",children:"AmitojInfra"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[(0,r.jsxs)("ul",{className:"nav-links",children:[(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/",className:o("/"),children:"Home"})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/dashboard",className:o("/dashboard"),children:"Dashboard"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/employees",className:o("/employees"),children:"Employees"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/attendance",className:o("/attendance"),children:"Attendance"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/payments",className:o("/payments"),children:"Payments"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/salary",className:o("/salary"),children:"Salary"})}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/expenses",className:o("/expenses"),children:"Expenses"})})]})]}),(0,r.jsx)("div",{className:"auth-section",children:!n&&(0,r.jsx)(r.Fragment,{children:t?(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[t.photoURL&&(0,r.jsx)("div",{style:{position:"relative",width:"32px",height:"32px"},children:(0,r.jsx)(l(),{src:t.photoURL,alt:t.displayName||"User",width:32,height:32,style:{borderRadius:"50%",objectFit:"cover"},unoptimized:!0})}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",color:"#333",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.displayName||t.email}),(0,r.jsx)("button",{onClick:i,style:{padding:"0.25rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.25rem",cursor:"pointer",color:"#666"},children:"Sign Out"})]}):(0,r.jsx)(r.Fragment,{children:s?(0,r.jsx)(c(),{href:"/auth",className:"".concat(o("/auth")," auth-link"),style:{padding:"0.5rem 1rem",backgroundColor:"#0070f3",color:"white",borderRadius:"0.25rem",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:"Sign In"}):(0,r.jsx)(c(),{href:"/firebase-setup",className:"".concat(o("/firebase-setup")," auth-link"),style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",borderRadius:"0.25rem",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500"},children:"Setup Firebase"})})})})]})]})})})},p=()=>(0,r.jsx)("footer",{className:"footer",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," AmitojInfra. All rights reserved."]}),(0,r.jsx)("p",{children:"Built with Next.js and deployed on GitHub Pages"})]})}),h=e=>{let{children:t,title:a="AmitojInfra - Next.js App",description:n="A Next.js application deployed on GitHub Pages"}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:a}),(0,r.jsx)("meta",{name:"description",content:n}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"main",children:(0,r.jsx)("div",{className:"container",children:t})}),(0,r.jsx)(p,{})]})}},8664:function(e,t,a){a.d(t,{_O:function(){return s},f7:function(){return c}});var r=a(5799);let n={FUEL:"fuel",RAW_MATERIALS:"raw_materials",GROCERIES:"groceries",TEA_SNACKS:"tea_snacks",SAFETY_EQUIPMENT:"safety_equipment",ACCOMMODATION:"accommodation",TRANSPORT:"transport",EMERGENCY:"emergency",SUPERVISOR_TRAVEL:"supervisor_travel",OFFICE_STATIONERY:"office_stationery"},s={[n.FUEL]:"Diesel/Petrol for Tractor, Hydra",[n.RAW_MATERIALS]:"Raw Materials (Cement, Sand)",[n.GROCERIES]:"Groceries for Food",[n.TEA_SNACKS]:"Tea/Snacks",[n.SAFETY_EQUIPMENT]:"Safety Gloves, Helmets, Jackets, Shoes",[n.ACCOMMODATION]:"Rooms/House Rent for Workers",[n.TRANSPORT]:"Transport Charges",[n.EMERGENCY]:"Emergency Purchases",[n.SUPERVISOR_TRAVEL]:"Supervisor Travelling",[n.OFFICE_STATIONERY]:"Office Stationery"},o={CASH:"cash",ONLINE:"online"},c={[o.CASH]:"Cash",[o.ONLINE]:"Online"},i={PENDING:"pending"};class l{convertTimestampToDate(e){return e?e.toDate&&"function"==typeof e.toDate?e.toDate():new Date(e):null}formatExpenseData(e){return{...e,date:this.convertTimestampToDate(e.date),createdAt:this.convertTimestampToDate(e.createdAt),updatedAt:this.convertTimestampToDate(e.updatedAt)}}validateExpenseData(e){let t={};if(!e.amount||isNaN(e.amount)||0>=parseFloat(e.amount)?t.amount="Amount must be a positive number":parseFloat(e.amount)>1e6&&(t.amount="Amount cannot exceed â‚¹10,00,000"),e.category&&Object.values(n).includes(e.category)||(t.category="Please select a valid category"),e.date){let a=new Date(e.date),r=new Date,n=new Date;n.setFullYear(r.getFullYear()-1),a>r?t.date="Expense date cannot be in the future":a<n&&(t.date="Expense date cannot be more than one year old")}else t.date="Date is required";return e.paymentMode&&Object.values(o).includes(e.paymentMode)||(t.paymentMode="Please select a valid payment mode"),e.vendor&&0===e.vendor.trim().length?t.vendor="Vendor name cannot be empty if provided":e.vendor&&e.vendor.length>100&&(t.vendor="Vendor name cannot exceed 100 characters"),e.description&&e.description.length>500&&(t.description="Description cannot exceed 500 characters"),{isValid:0===Object.keys(t).length,errors:t}}async createExpense(e,t){try{let a=this.validateExpenseData(e);if(!a.isValid)throw Error("Validation failed: ".concat(Object.values(a.errors).join(", ")));let n={amount:parseFloat(e.amount),category:e.category,vendor:e.vendor||null,date:new Date(e.date),description:e.description||null,paymentMode:e.paymentMode,status:i.PENDING,createdBy:t},s=await r.Z.addDocument(this.collectionName,n);return{success:!0,id:s.id,message:"Expense created successfully"}}catch(e){return console.error("Error creating expense:",e),{success:!1,error:e.message||"Failed to create expense"}}}async getExpenseById(e){try{let t=await r.Z.getDocument(this.collectionName,e);if(t)return{success:!0,expense:this.formatExpenseData(t)};return{success:!1,error:"Expense not found"}}catch(e){return console.error("Error getting expense:",e),{success:!1,error:e.message||"Failed to get expense"}}}async getExpenses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t={},a=[];e.category&&a.push({field:"category",operator:"==",value:e.category}),e.paymentMode&&a.push({field:"paymentMode",operator:"==",value:e.paymentMode}),e.status&&a.push({field:"status",operator:"==",value:e.status}),a.length>0&&(t.where=a),t.orderBy={field:"createdAt",direction:"desc"},e.limit&&(t.limit=e.limit);let n=(await r.Z.getDocuments(this.collectionName,t)).map(e=>this.formatExpenseData(e));return(e.startDate||e.endDate)&&(n=n.filter(t=>{let a=new Date(t.date);if(e.startDate){let t=new Date(e.startDate);if(a<t)return!1}if(e.endDate){let t=new Date(e.endDate);if(t.setHours(23,59,59,999),a>t)return!1}return!0})),{success:!0,expenses:n,total:n.length}}catch(e){return console.error("Error getting expenses:",e),{success:!1,error:e.message||"Failed to get expenses",expenses:[]}}}async updateExpense(e,t,a){try{let n=this.validateExpenseData(t);if(!n.isValid)throw Error("Validation failed: ".concat(Object.values(n.errors).join(", ")));let s={amount:parseFloat(t.amount),category:t.category,vendor:t.vendor||null,date:new Date(t.date),description:t.description||null,paymentMode:t.paymentMode,updatedBy:a};return await r.Z.updateDocument(this.collectionName,e,s),{success:!0,message:"Expense updated successfully"}}catch(e){return console.error("Error updating expense:",e),{success:!1,error:e.message||"Failed to update expense"}}}async deleteExpense(e){try{return await r.Z.deleteDocument(this.collectionName,e),{success:!0,message:"Expense deleted successfully"}}catch(e){return console.error("Error deleting expense:",e),{success:!1,error:e.message||"Failed to delete expense"}}}async getDailyExpenseReport(e){try{let t=new Date(e);t.setHours(0,0,0,0);let a=new Date(e);a.setHours(23,59,59,999);let r=await this.getExpenses({startDate:t.toISOString(),endDate:a.toISOString()});if(!r.success)throw Error(r.error);let s=r.expenses,c={totalExpenses:s.length,totalAmount:s.reduce((e,t)=>e+t.amount,0),categoryBreakdown:{},paymentModeBreakdown:{[o.CASH]:0,[o.ONLINE]:0}};return Object.values(n).forEach(e=>{c.categoryBreakdown[e]={count:0,amount:0}}),s.forEach(e=>{c.categoryBreakdown[e.category]&&(c.categoryBreakdown[e.category].count++,c.categoryBreakdown[e.category].amount+=e.amount),c.paymentModeBreakdown.hasOwnProperty(e.paymentMode)&&(c.paymentModeBreakdown[e.paymentMode]+=e.amount)}),{success:!0,date:e,expenses:s,summary:c}}catch(e){return console.error("Error getting daily expense report:",e),{success:!1,error:e.message||"Failed to get daily expense report"}}}async getMonthlyExpenseReport(e,t){try{let a=new Date(e,t-1,1),r=new Date(e,t,0,23,59,59,999),s=await this.getExpenses({startDate:a.toISOString(),endDate:r.toISOString()});if(!s.success)throw Error(s.error);let c=s.expenses,i={},l={totalExpenses:c.length,totalAmount:c.reduce((e,t)=>e+t.amount,0),categoryBreakdown:{},paymentModeBreakdown:{[o.CASH]:0,[o.ONLINE]:0},averageDaily:0};Object.values(n).forEach(e=>{l.categoryBreakdown[e]={count:0,amount:0}}),c.forEach(e=>{let t=e.date.getDate();i[t]||(i[t]={date:e.date.toISOString().split("T")[0],expenses:[],totalAmount:0}),i[t].expenses.push(e),i[t].totalAmount+=e.amount,l.categoryBreakdown[e.category]&&(l.categoryBreakdown[e.category].count++,l.categoryBreakdown[e.category].amount+=e.amount),l.paymentModeBreakdown.hasOwnProperty(e.paymentMode)&&(l.paymentModeBreakdown[e.paymentMode]+=e.amount)});let d=new Date(e,t,0).getDate();return l.averageDaily=l.totalAmount/d,{success:!0,year:e,month:t,monthName:new Date(e,t-1).toLocaleString("default",{month:"long"}),dailyExpenses:i,summary:l}}catch(e){return console.error("Error getting monthly expense report:",e),{success:!1,error:e.message||"Failed to get monthly expense report"}}}async getCategorySummary(e,t){try{let a=await this.getExpenses({startDate:e,endDate:t});if(!a.success)throw Error(a.error);let r=a.expenses,o={};return Object.values(n).forEach(e=>{o[e]={category:e,label:s[e],count:0,totalAmount:0,averageAmount:0,expenses:[]}}),r.forEach(e=>{o[e.category]&&(o[e.category].count++,o[e.category].totalAmount+=e.amount,o[e.category].expenses.push(e))}),Object.keys(o).forEach(e=>{let t=o[e];t.count>0&&(t.averageAmount=t.totalAmount/t.count)}),{success:!0,startDate:e,endDate:t,categorySummary:Object.values(o),totalAmount:r.reduce((e,t)=>e+t.amount,0),totalExpenses:r.length}}catch(e){return console.error("Error getting category summary:",e),{success:!1,error:e.message||"Failed to get category summary"}}}formatCurrency(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e)}calculateTotalDays(e,t){let a=new Date(e);return Math.ceil((new Date(t).getTime()-a.getTime())/864e5)+1}constructor(){this.collectionName="expenses"}}let d=new l;t.ZP=d}}]);