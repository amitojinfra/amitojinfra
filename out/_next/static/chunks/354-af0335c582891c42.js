(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[354],{5799:function(e,t,r){"use strict";var n=r(109),i=r(6099);class o{getDB(){return this.db||(this.db=(0,i.hi)()),this.db}async addDocument(e,t){try{let r=this.getDB();if(!r)throw Error("Firestore database is not initialized. Please check your Firebase configuration.");let i=await (0,n.ET)((0,n.hJ)(r,e),{...t,createdAt:(0,n.Bt)(),updatedAt:(0,n.Bt)()});return console.log("Document written with ID: ",i.id),i}catch(e){if(console.error("Error adding document: ",e),"permission-denied"===e.code){let t=Error("Permission denied: Your Firestore security rules are preventing this write operation. Please check that you are authenticated and your Firestore rules allow writes for authenticated users. Original error: "+e.message);throw t.code=e.code,t.originalError=e,t}if("unauthenticated"===e.code){let t=Error("Authentication required: You must be signed in to write to Firestore. Please sign in and try again. Original error: "+e.message);throw t.code=e.code,t.originalError=e,t}throw e}}async getDocument(e,t){try{let r=this.getDB(),i=(0,n.JU)(r,e,t),o=await (0,n.QT)(i);if(o.exists())return{id:o.id,...o.data()};return console.log("No such document!"),null}catch(e){throw console.error("Error getting document: ",e),e}}async getDocuments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=this.getDB(),i=(0,n.hJ)(r,e);t.where&&t.where.forEach(e=>{i=(0,n.IO)(i,(0,n.ar)(e.field,e.operator,e.value))}),t.orderBy&&(i=(0,n.IO)(i,(0,n.Xo)(t.orderBy.field,t.orderBy.direction||"asc"))),t.limit&&(i=(0,n.IO)(i,(0,n.b9)(t.limit)));let o=await (0,n.PL)(i),a=[];return o.forEach(e=>{a.push({id:e.id,...e.data()})}),a}catch(e){throw console.error("Error getting documents: ",e),e}}async updateDocument(e,t,r){try{let i=this.getDB(),o=(0,n.JU)(i,e,t);await (0,n.r7)(o,{...r,updatedAt:(0,n.Bt)()}),console.log("Document updated successfully")}catch(e){throw console.error("Error updating document: ",e),e}}async deleteDocument(e,t){try{let r=this.getDB(),i=(0,n.JU)(r,e,t);await (0,n.oe)(i),console.log("Document deleted successfully")}catch(e){throw console.error("Error deleting document: ",e),e}}subscribeToCollection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let i=this.getDB(),o=(0,n.hJ)(i,e);return r.where&&r.where.forEach(e=>{o=(0,n.IO)(o,(0,n.ar)(e.field,e.operator,e.value))}),r.orderBy&&(o=(0,n.IO)(o,(0,n.Xo)(r.orderBy.field,r.orderBy.direction||"asc"))),r.limit&&(o=(0,n.IO)(o,(0,n.b9)(r.limit))),(0,n.cf)(o,e=>{let r=[];e.forEach(e=>{r.push({id:e.id,...e.data()})}),t(r)},e=>{console.error("Error in real-time listener: ",e),t([])})}catch(e){throw console.error("Error setting up real-time listener: ",e),e}}subscribeToDocument(e,t,r){try{let i=this.getDB(),o=(0,n.JU)(i,e,t);return(0,n.cf)(o,e=>{e.exists()?r({id:e.id,...e.data()}):r(null)},e=>{console.error("Error in real-time document listener: ",e),r(null)})}catch(e){throw console.error("Error setting up document real-time listener: ",e),e}}async addToArrayField(e,t,r,i){try{let o=this.getDB(),a=(0,n.JU)(o,e,t);await (0,n.r7)(a,{[r]:(0,n.vr)(i),updatedAt:(0,n.Bt)()}),console.log("Item added to array field successfully")}catch(e){throw console.error("Error adding to array field: ",e),e}}async removeFromArrayField(e,t,r,i){try{let o=this.getDB(),a=(0,n.JU)(o,e,t);await (0,n.r7)(a,{[r]:(0,n.Ab)(i),updatedAt:(0,n.Bt)()}),console.log("Item removed from array field successfully")}catch(e){throw console.error("Error removing from array field: ",e),e}}async incrementField(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;try{let o=this.getDB(),a=(0,n.JU)(o,e,t);await (0,n.r7)(a,{[r]:(0,n.nP)(i),updatedAt:(0,n.Bt)()}),console.log("Field incremented successfully")}catch(e){throw console.error("Error incrementing field: ",e),e}}getServerTimestamp(){return(0,n.Bt)()}async batchOperations(e){try{let t=this.getDB(),r=(0,n.qs)(t);e.forEach(e=>{let{type:i,collectionName:o,docId:a,data:s}=e,l=(0,n.JU)(t,o,a);switch(i){case"set":r.set(l,{...s,createdAt:(0,n.Bt)(),updatedAt:(0,n.Bt)()});break;case"update":r.update(l,{...s,updatedAt:(0,n.Bt)()});break;case"delete":r.delete(l);break;default:console.warn("Unknown batch operation type: ".concat(i))}}),await r.commit(),console.log("Batch operations completed successfully")}catch(e){throw console.error("Error in batch operations: ",e),e}}constructor(){this.db=null}}let a=new o;t.Z=a},4069:function(e,t,r){"use strict";r.d(t,{CW:function(){return u},Jx:function(){return o},RT:function(){return d},UR:function(){return l},uO:function(){return n},wO:function(){return i},xi:function(){return c}});let n=e=>{let t={},r=!0;if(e.name&&""!==e.name.trim()?e.name.trim().length<2?(t.name="Name must be at least 2 characters long",r=!1):e.name.trim().length>100&&(t.name="Name must not exceed 100 characters",r=!1):(t.name="Name is required",r=!1),e.aadhar_id&&""!==e.aadhar_id.trim()&&!/^\d{12}$/.test(e.aadhar_id.trim())&&(t.aadhar_id="Aadhar ID must be exactly 12 digits",r=!1),e.joining_date){let n=new Date(e.joining_date),i=new Date,o=new Date("1990-01-01");isNaN(n.getTime())?(t.joining_date="Invalid joining date",r=!1):n>i?(t.joining_date="Joining date cannot be in the future",r=!1):n<o&&(t.joining_date="Joining date cannot be before 1990",r=!1)}else t.joining_date="Joining date is required",r=!1;if(void 0!==e.age&&null!==e.age&&""!==e.age){let n=parseInt(e.age);(isNaN(n)||n<18||n>65)&&(t.age="Age must be between 18 and 65",r=!1)}return{isValid:r,errors:t}},i=e=>{var t;return e?{...e,name:(null===(t=e.name)||void 0===t?void 0:t.trim())||"N/A",aadhar_id:e.aadhar_id?a(e.aadhar_id):"Not provided",joining_date:e.joining_date?s(e.joining_date):"N/A",age:e.age?"".concat(e.age," years"):"Not specified",formatted_joining_date:e.joining_date?new Date(e.joining_date).toLocaleDateString():"N/A"}:null},o=e=>{var t;let r={name:(null===(t=e.name)||void 0===t?void 0:t.trim())||"",joining_date:e.joining_date||null};return e.aadhar_id&&""!==e.aadhar_id.trim()&&(r.aadhar_id=e.aadhar_id.trim()),void 0!==e.age&&null!==e.age&&""!==e.age&&(r.age=parseInt(e.age)),r},a=e=>e&&12===e.length?"".concat(e.substring(0,4),"-****-").concat(e.substring(8)):e,s=e=>{if(!e)return"N/A";try{let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}catch(e){return"Invalid Date"}},l=e=>{if(!e)return"N/A";try{let t=new Date(e),r=new Date;if(isNaN(t.getTime()))return"N/A";let n=Math.ceil(Math.abs(r-t)/864e5),i=Math.floor(n/365),o=Math.floor(n%365/30);if(0===i&&0===o)return"Less than a month";if(0===i)return"".concat(o," month").concat(o>1?"s":"");if(0===o)return"".concat(i," year").concat(i>1?"s":"");return"".concat(i," year").concat(i>1?"s":"",", ").concat(o," month").concat(o>1?"s":"")}catch(e){return"N/A"}},c=e=>{let t=[];if(e.name){t.push(e.name.toLowerCase());let r=e.name.toLowerCase().split(" ");t.push(...r)}if(e.aadhar_id&&t.push(e.aadhar_id),e.joining_date){let r=new Date(e.joining_date).getFullYear();t.push(r.toString())}return[...new Set(t)]},u=()=>({name:"",aadhar_id:"",joining_date:"",age:""}),d=e=>{if(!e)return{status:"unknown",label:"Unknown",color:"#6c757d"};try{let t=new Date(e),r=new Date,n=Math.floor((r-t)/864e5);if(n<0)return{status:"future",label:"Future Joining",color:"#17a2b8"};if(n<=90)return{status:"new",label:"New Employee",color:"#28a745"};if(n<=365)return{status:"recent",label:"Recent Hire",color:"#ffc107"};return{status:"experienced",label:"Experienced",color:"#007bff"}}catch(e){return{status:"unknown",label:"Unknown",color:"#6c757d"}}}},8804:function(e,t,r){"use strict";var n=r(5799),i=r(4069);class o{async createEmployee(e){try{let t=(0,i.uO)(e);if(!t.isValid)throw Error("Validation failed: ".concat(Object.values(t.errors).join(", ")));if(e.aadhar_id&&""!==e.aadhar_id.trim()&&await this.findByAadharId(e.aadhar_id.trim()))throw Error("An employee with this Aadhar ID already exists");let r=(0,i.Jx)(e);return r.searchKeywords=(0,i.xi)(r),r.status="active",{id:(await n.Z.addDocument(this.collectionName,r)).id,...r}}catch(e){throw console.error("Error creating employee:",e),e}}async getEmployee(e){try{return await n.Z.getDocument(this.collectionName,e)}catch(e){throw console.error("Error getting employee:",e),e}}async updateEmployee(e,t){try{let r=(0,i.uO)(t);if(!r.isValid)throw Error("Validation failed: ".concat(Object.values(r.errors).join(", ")));if(t.aadhar_id&&""!==t.aadhar_id.trim()){let r=await this.findByAadharId(t.aadhar_id.trim());if(r&&r.id!==e)throw Error("An employee with this Aadhar ID already exists")}let o=(0,i.Jx)(t);o.searchKeywords=(0,i.xi)(o),await n.Z.updateDocument(this.collectionName,e,o)}catch(e){throw console.error("Error updating employee:",e),e}}async deleteEmployee(e){try{await n.Z.updateDocument(this.collectionName,e,{status:"inactive",deletedAt:new Date().toISOString()})}catch(e){throw console.error("Error deleting employee:",e),e}}async permanentlyDeleteEmployee(e){try{await n.Z.deleteDocument(this.collectionName,e)}catch(e){throw console.error("Error permanently deleting employee:",e),e}}async getAllEmployees(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t={where:[{field:"status",operator:"==",value:"active"}],...e};return(await n.Z.getDocuments(this.collectionName,t)).sort((e,t)=>{var r,n;let i=(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)||0;return((null===(n=t.createdAt)||void 0===n?void 0:n.seconds)||0)-i})}catch(e){throw console.error("Error getting all employees:",e),e}}async searchEmployees(e){try{if(!e||""===e.trim())return await this.getAllEmployees();let t=e.toLowerCase().trim();return(await this.getAllEmployees()).filter(e=>!!(e.name&&e.name.toLowerCase().includes(t)||e.aadhar_id&&e.aadhar_id.includes(t)||e.searchKeywords&&e.searchKeywords.some(e=>e.includes(t))))}catch(e){throw console.error("Error searching employees:",e),e}}async findByAadharId(e){try{if(!e||""===e.trim())return null;let t=(await n.Z.getDocuments(this.collectionName,{where:[{field:"aadhar_id",operator:"==",value:e.trim()}],limit:1})).filter(e=>"active"===e.status);return t.length>0?t[0]:null}catch(e){throw console.error("Error finding employee by Aadhar ID:",e),e}}async getEmployeesByJoiningDateRange(e,t){try{return(await this.getAllEmployees()).filter(r=>{if(!r.joining_date)return!1;let n=new Date(r.joining_date);return n>=e&&n<=t})}catch(e){throw console.error("Error getting employees by joining date range:",e),e}}async getEmployeesByAgeRange(e,t){try{return(await this.getAllEmployees()).filter(r=>!!r.age&&r.age>=e&&r.age<=t)}catch(e){throw console.error("Error getting employees by age range:",e),e}}async getEmployeeStats(){try{let e=await this.getAllEmployees(),t={total:e.length,withAadhar:e.filter(e=>e.aadhar_id).length,withAge:e.filter(e=>e.age).length,avgAge:0,newestHire:null,oldestHire:null,ageDistribution:{"18-25":0,"26-35":0,"36-45":0,"46-55":0,"56-65":0}};if(e.length>0){let r=e.filter(e=>e.age);r.length>0&&(t.avgAge=Math.round(r.reduce((e,t)=>e+t.age,0)/r.length));let n=e.filter(e=>e.joining_date).sort((e,t)=>new Date(t.joining_date)-new Date(e.joining_date));n.length>0&&(t.newestHire=n[0],t.oldestHire=n[n.length-1]),r.forEach(e=>{let r=e.age;r>=18&&r<=25?t.ageDistribution["18-25"]++:r>=26&&r<=35?t.ageDistribution["26-35"]++:r>=36&&r<=45?t.ageDistribution["36-45"]++:r>=46&&r<=55?t.ageDistribution["46-55"]++:r>=56&&r<=65&&t.ageDistribution["56-65"]++})}return t}catch(e){throw console.error("Error getting employee stats:",e),e}}subscribeToEmployees(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r={where:[{field:"status",operator:"==",value:"active"}],...t};return n.Z.subscribeToCollection(this.collectionName,t=>{let r=t.sort((e,t)=>{var r,n;let i=(null===(r=e.createdAt)||void 0===r?void 0:r.seconds)||0;return((null===(n=t.createdAt)||void 0===n?void 0:n.seconds)||0)-i});e(r)},r)}catch(e){throw console.error("Error subscribing to employees:",e),e}}subscribeToEmployee(e,t){try{return n.Z.subscribeToDocument(this.collectionName,e,t)}catch(e){throw console.error("Error subscribing to employee:",e),e}}async batchCreateEmployees(e){try{let t=[],r=[];for(let n=0;n<e.length;n++)try{let r=await this.createEmployee(e[n]);t.push({index:n,success:!0,employee:r})}catch(t){r.push({index:n,error:t.message,data:e[n]})}return{results:t,errors:r}}catch(e){throw console.error("Error batch creating employees:",e),e}}constructor(){this.collectionName="employees"}}let a=new o;t.Z=a},7443:function(e,t,r){"use strict";var n=r(3454);r(1479);var i=r(7294),o=i&&"object"==typeof i&&"default"in i?i:{default:i},a=void 0!==n&&n.env&&!0,s=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,o=void 0===i?a:i;c(s(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",c("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l=document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(c(s(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed){var r=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];c(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},t.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},t.cssRules=function(){var e=this;return this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,r){t&&c(s(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(n,r):i.appendChild(n),n},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},d={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return d[n]||(d[n]="jsx-"+u(e+"-"+r)),d[n]}function m(e,t){var r=e+t;return d[r]||(d[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[r]}var g=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,i=t.optimizeForSpeed,o=void 0!==i&&i;this._sheet=n||new l({name:"styled-jsx",optimizeForSpeed:o}),this._sheet.inject(),n&&"boolean"==typeof o&&(this._sheet.setOptimizeForSpeed(o),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,i=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var o=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=o,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],n=e[1];return o.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var i=h(n,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return m(i,e)}):[m(i,t)]}}return{styleId:h(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=i.createContext(null);f.displayName="StyleSheetContext";var y=o.default.useInsertionEffect||o.default.useLayoutEffect,p=new g;function _(e){var t=p||i.useContext(f);return t&&y(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}_.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=_},645:function(e,t,r){"use strict";e.exports=r(7443).style},1479:function(){}}]);