"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{5724:function(e,s,a){var t=a(5893),o=a(645),r=a.n(o),n=a(7294),i=a(3615),l=a(5468);s.Z=e=>{let{employees:s=[],selectedDate:a=null,mode:o="single",onSubmit:d,onCancel:x,loading:c=!1}=e,{user:m}=(0,i.a)(),[b,p]=(0,n.useState)({date:a||new Date().toISOString().split("T")[0],employees:[],bulkStatus:l.H8.PRESENT,notes:""}),[u,f]=(0,n.useState)(new Set),[j,k]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[y,w]=(0,n.useState)({});(0,n.useEffect)(()=>{a&&p(e=>({...e,date:a}))},[a]),(0,n.useEffect)(()=>{if(s.length>0&&"bulk"===o){let e=s.map(e=>({...(0,l.dP)(),employee_id:e.id,employee_name:e.name,date:b.date,status:l.H8.PRESENT,marked_by:(null==m?void 0:m.uid)||(null==m?void 0:m.email)||"admin"}));p(s=>({...s,employees:e}))}},[s,o,m,b.date]);let z=(e,s)=>{p(a=>({...a,employees:a.employees.map(a=>a.employee_id===e?{...a,status:s}:a)}))},N=e=>{let a=new Set(u);a.has(e)?a.delete(e):a.add(e),f(a),k(a.size===s.length)},v=()=>{let e={};return b.date?new Date(b.date)>new Date&&(e.date="Cannot mark attendance for future dates"):e.date="Date is required","bulk"===o&&0===u.size&&(e.employees="Please select at least one employee"),w(e),0===Object.keys(e).length},S=async e=>{if(e.preventDefault(),v()){g(!0);try{if("bulk"===o){let e=b.employees.filter(e=>u.has(e.employee_id));await d(e)}else await d(b)}catch(e){console.error("Form submission error:",e),w({general:e.message||"An error occurred while marking attendance"})}finally{g(!1)}}},A=e=>{switch(e){case l.H8.PRESENT:return"#d4edda";case l.H8.ABSENT:return"#f8d7da";case l.H8.HALF_DAY:return"#fff3cd";default:return"#f8f9fa"}},E=e=>{switch(e){case l.H8.PRESENT:return"#c3e6cb";case l.H8.ABSENT:return"#f5c6cb";case l.H8.HALF_DAY:return"#ffeaa7";default:return"#dee2e6"}};return(0,t.jsxs)("div",{className:"jsx-1678811008250e06 attendance-form",children:[(0,t.jsxs)("form",{onSubmit:S,className:"jsx-1678811008250e06 form",children:[(0,t.jsxs)("div",{className:"jsx-1678811008250e06 form-header",children:[(0,t.jsx)("h2",{className:"jsx-1678811008250e06",children:"bulk"===o?"Mark Bulk Attendance":"Mark Attendance"}),(0,t.jsx)("p",{className:"jsx-1678811008250e06 form-description",children:"Mark attendance for employees on the selected date"})]}),y.general&&(0,t.jsxs)("div",{className:"jsx-1678811008250e06 error-banner",children:[(0,t.jsx)("strong",{className:"jsx-1678811008250e06",children:"Error:"})," ",y.general]}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 form-group",children:[(0,t.jsx)("label",{htmlFor:"date",className:"jsx-1678811008250e06 form-label",children:"Attendance Date *"}),(0,t.jsx)("input",{type:"date",id:"date",value:b.date,onChange:e=>{let s=e.target.value;p(e=>({...e,date:s,employees:e.employees.map(e=>({...e,date:s}))})),y.date&&w(e=>({...e,date:""}))},max:new Date().toISOString().split("T")[0],required:!0,className:"jsx-1678811008250e06 "+"form-input ".concat(y.date?"error":"")}),y.date&&(0,t.jsx)("div",{className:"jsx-1678811008250e06 error-message",children:y.date})]}),"bulk"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"jsx-1678811008250e06 bulk-controls",children:[(0,t.jsxs)("div",{className:"jsx-1678811008250e06 bulk-actions",children:[(0,t.jsx)("div",{className:"jsx-1678811008250e06 select-all",children:(0,t.jsxs)("label",{className:"jsx-1678811008250e06 checkbox-label",children:[(0,t.jsx)("input",{type:"checkbox",checked:j,onChange:()=>{j?f(new Set):f(new Set(s.map(e=>e.id))),k(!j)},className:"jsx-1678811008250e06"}),(0,t.jsxs)("span",{className:"jsx-1678811008250e06",children:["Select All (",s.length," employees)"]})]})}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 bulk-status",children:[(0,t.jsxs)("select",{value:b.bulkStatus,onChange:e=>{let s=e.target.value;p(e=>({...e,bulkStatus:s,employees:e.employees.map(e=>u.has(e.employee_id)?{...e,status:s}:e)}))},className:"jsx-1678811008250e06 bulk-status-select",children:[(0,t.jsx)("option",{value:l.H8.PRESENT,className:"jsx-1678811008250e06",children:"Mark as Present"}),(0,t.jsx)("option",{value:l.H8.ABSENT,className:"jsx-1678811008250e06",children:"Mark as Absent"}),(0,t.jsx)("option",{value:l.H8.HALF_DAY,className:"jsx-1678811008250e06",children:"Mark as Half Day"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{p(e=>({...e,employees:e.employees.map(e=>u.has(e.employee_id)?{...e,status:b.bulkStatus}:e)}))},disabled:0===u.size,className:"jsx-1678811008250e06 apply-bulk-btn",children:["Apply to Selected (",u.size,")"]})]})]}),y.employees&&(0,t.jsx)("div",{className:"jsx-1678811008250e06 error-message",children:y.employees})]}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 employee-list",children:[(0,t.jsxs)("div",{className:"jsx-1678811008250e06 list-header",children:[(0,t.jsxs)("h3",{className:"jsx-1678811008250e06",children:["Employees (",s.length,")"]}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 selected-count",children:["Selected: ",u.size," / ",s.length]})]}),(0,t.jsx)("div",{className:"jsx-1678811008250e06 employee-grid",children:b.employees.map((e,a)=>{let o=s.find(s=>s.id===e.employee_id);if(!o)return null;let r=u.has(o.id);return(0,t.jsxs)("div",{style:{backgroundColor:A(e.status),borderColor:E(e.status)},className:"jsx-1678811008250e06 "+"employee-item ".concat(r?"selected":""),children:[(0,t.jsx)("div",{className:"jsx-1678811008250e06 employee-header",children:(0,t.jsxs)("label",{className:"jsx-1678811008250e06 checkbox-label",children:[(0,t.jsx)("input",{type:"checkbox",checked:r,onChange:()=>N(o.id),className:"jsx-1678811008250e06"}),(0,t.jsx)("span",{className:"jsx-1678811008250e06 employee-name",children:o.name})]})}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 employee-info",children:[(0,t.jsxs)("div",{className:"jsx-1678811008250e06 employee-id",children:["ID: ",o.id.slice(0,8),"..."]}),o.aadhar_id&&(0,t.jsxs)("div",{className:"jsx-1678811008250e06 employee-aadhar",children:["Aadhar: ",o.aadhar_id.slice(0,4),"****",o.aadhar_id.slice(-4)]})]}),(0,t.jsx)("div",{className:"jsx-1678811008250e06 status-controls",children:(0,t.jsx)("div",{className:"jsx-1678811008250e06 status-buttons",children:Object.values(l.H8).map(s=>(0,t.jsxs)("button",{type:"button",onClick:()=>z(o.id,s),"data-status":s,className:"jsx-1678811008250e06 "+"status-btn ".concat(e.status===s?"active":""),children:[s===l.H8.PRESENT&&"✓ Present",s===l.H8.ABSENT&&"✗ Absent",s===l.H8.HALF_DAY&&"◐ Half Day"]},s))})})]},o.id)})})]})]}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 form-group",children:[(0,t.jsx)("label",{htmlFor:"notes",className:"jsx-1678811008250e06 form-label",children:"Notes (Optional)"}),(0,t.jsx)("textarea",{id:"notes",value:b.notes,onChange:e=>p(s=>({...s,notes:e.target.value})),placeholder:"Add any additional notes about attendance...",rows:"3",maxLength:"500",className:"jsx-1678811008250e06 form-textarea"}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 field-hint",children:[b.notes.length,"/500 characters"]})]}),(0,t.jsxs)("div",{className:"jsx-1678811008250e06 form-actions",children:[(0,t.jsx)("button",{type:"button",onClick:x,disabled:h||c,className:"jsx-1678811008250e06 btn-secondary",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:h||c||"bulk"===o&&0===u.size,className:"jsx-1678811008250e06 btn-primary",children:h||c?"Marking Attendance...":"Mark Attendance".concat("bulk"===o?" (".concat(u.size,")"):"")})]})]}),(0,t.jsx)(r(),{id:"1678811008250e06",children:'.attendance-form.jsx-1678811008250e06{max-width:1e3px;margin:0 auto;padding:20px}.form.jsx-1678811008250e06{background:white;padding:30px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.1);-moz-box-shadow:0 2px 10px rgba(0,0,0,.1);box-shadow:0 2px 10px rgba(0,0,0,.1)}.form-header.jsx-1678811008250e06{margin-bottom:30px;text-align:center}.form-header.jsx-1678811008250e06 h2.jsx-1678811008250e06{margin:0 0 10px 0;color:#333;font-size:1.5rem}.form-description.jsx-1678811008250e06{margin:0;color:#666;font-size:.9rem}.error-banner.jsx-1678811008250e06{background:#fee;color:#c33;padding:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-bottom:20px;border:1px solid#fcc}.form-group.jsx-1678811008250e06{margin-bottom:20px}.form-label.jsx-1678811008250e06{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:.9rem}.form-input.jsx-1678811008250e06,.form-textarea.jsx-1678811008250e06{width:100%;padding:12px;border:1px solid#ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;-webkit-transition:border-color.2s,box-shadow.2s;-moz-transition:border-color.2s,box-shadow.2s;-o-transition:border-color.2s,box-shadow.2s;transition:border-color.2s,box-shadow.2s}.form-input.jsx-1678811008250e06:focus,.form-textarea.jsx-1678811008250e06:focus{outline:none;border-color:#007cba;-webkit-box-shadow:0 0 0 2px rgba(0,124,186,.2);-moz-box-shadow:0 0 0 2px rgba(0,124,186,.2);box-shadow:0 0 0 2px rgba(0,124,186,.2)}.form-input.error.jsx-1678811008250e06,.form-textarea.error.jsx-1678811008250e06{border-color:#dc3545}.error-message.jsx-1678811008250e06{color:#dc3545;font-size:.8rem;margin-top:4px}.field-hint.jsx-1678811008250e06{color:#666;font-size:.8rem;margin-top:4px}.bulk-controls.jsx-1678811008250e06{background:#f8f9fa;padding:20px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:20px;border:1px solid#e9ecef}.bulk-actions.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:15px}.checkbox-label.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;font-weight:500}.checkbox-label.jsx-1678811008250e06 input[type="checkbox"].jsx-1678811008250e06{margin-right:8px}.bulk-status.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px}.bulk-status-select.jsx-1678811008250e06{padding:8px 12px;border:1px solid#ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px}.apply-bulk-btn.jsx-1678811008250e06{padding:8px 16px;background:#17a2b8;color:white;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;cursor:pointer;font-weight:500}.apply-bulk-btn.jsx-1678811008250e06:hover:not(:disabled){background:#138496}.apply-bulk-btn.jsx-1678811008250e06:disabled{opacity:.6;cursor:not-allowed}.employee-list.jsx-1678811008250e06{margin-bottom:20px}.list-header.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid#e9ecef}.list-header.jsx-1678811008250e06 h3.jsx-1678811008250e06{margin:0;color:#333}.selected-count.jsx-1678811008250e06{font-size:.9rem;color:#666;font-weight:500}.employee-grid.jsx-1678811008250e06{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:15px}.employee-item.jsx-1678811008250e06{border:2px solid;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:15px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.employee-item.selected.jsx-1678811008250e06{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-box-shadow:0 4px 8px rgba(0,0,0,.1);-moz-box-shadow:0 4px 8px rgba(0,0,0,.1);box-shadow:0 4px 8px rgba(0,0,0,.1)}.employee-header.jsx-1678811008250e06{margin-bottom:10px}.employee-name.jsx-1678811008250e06{font-weight:600;color:#333}.employee-info.jsx-1678811008250e06{margin-bottom:15px;font-size:.8rem;color:#666}.employee-info.jsx-1678811008250e06 div.jsx-1678811008250e06{margin-bottom:2px}.status-controls.jsx-1678811008250e06{margin-top:10px}.status-buttons.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:6px}.status-btn.jsx-1678811008250e06{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:6px 8px;border:1px solid#ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:white;font-size:.75rem;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.status-btn.jsx-1678811008250e06:hover{background:#f8f9fa}.status-btn.active[data-status="present"].jsx-1678811008250e06{background:#28a745;color:white;border-color:#28a745}.status-btn.active[data-status="absent"].jsx-1678811008250e06{background:#dc3545;color:white;border-color:#dc3545}.status-btn.active[data-status="half-day"].jsx-1678811008250e06{background:#ffc107;color:#212529;border-color:#ffc107}.form-actions.jsx-1678811008250e06{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid#eee}.btn-primary.jsx-1678811008250e06,.btn-secondary.jsx-1678811008250e06{padding:12px 24px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:background-color.2s,-webkit-transform.1s;-moz-transition:background-color.2s,-moz-transform.1s;-o-transition:background-color.2s,-o-transform.1s;transition:background-color.2s,-webkit-transform.1s;transition:background-color.2s,-moz-transform.1s;transition:background-color.2s,-o-transform.1s;transition:background-color.2s,transform.1s}.btn-primary.jsx-1678811008250e06{background:#007cba;color:white}.btn-primary.jsx-1678811008250e06:hover:not(:disabled){background:#005a87;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-secondary.jsx-1678811008250e06{background:#f8f9fa;color:#666;border:1px solid#ddd}.btn-secondary.jsx-1678811008250e06:hover:not(:disabled){background:#e9ecef;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-primary.jsx-1678811008250e06:disabled,.btn-secondary.jsx-1678811008250e06:disabled{opacity:.6;cursor:not-allowed;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;transform:none}@media(max-width:768px){.attendance-form.jsx-1678811008250e06{padding:10px}.form.jsx-1678811008250e06{padding:20px}.bulk-actions.jsx-1678811008250e06{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.employee-grid.jsx-1678811008250e06{grid-template-columns:1fr}.form-actions.jsx-1678811008250e06{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.btn-primary.jsx-1678811008250e06,.btn-secondary.jsx-1678811008250e06{width:100%}}'})]})}}}]);