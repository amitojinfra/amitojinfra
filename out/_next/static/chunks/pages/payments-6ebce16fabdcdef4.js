(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{6557:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payments",function(){return s(617)}])},617:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var t=s(5893),o=s(645),r=s.n(o),n=s(7294),i=s(1163),d=s(1802),l=e=>{let{initialData:a=null,employees:s=[],onSubmit:o,onCancel:i,loading:l=!1,mode:c="create"}=e,[m,b]=(0,n.useState)((0,d.sy)()),[x,p]=(0,n.useState)({}),[f,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a?b({employee_id:a.employee_id||"",amount:a.amount||"",payment_date:a.payment_date?"string"==typeof a.payment_date?a.payment_date:a.payment_date.toISOString().split("T")[0]:"",payment_mode:a.payment_mode||"",paid_by:a.paid_by||"",notes:a.notes||""}):b((0,d.sy)())},[a]);let u=e=>{let{name:a,value:s}=e.target;b(e=>({...e,[a]:s})),x[a]&&p(e=>({...e,[a]:""}))},y=()=>{let e=(0,d.GA)(m);return p(e.errors),e.isValid},h=async e=>{if(e.preventDefault(),y()){j(!0);try{await o(m)}catch(e){console.error("Form submission error:",e),e.message.includes("Validation failed:")?p({general:e.message.replace("Validation failed:","").trim()}):e.message.includes("Employee not found")?p({employee_id:"Selected employee not found"}):p({general:e.message||"An error occurred while saving payment data"})}finally{j(!1)}}};return(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 payment-form",children:[(0,t.jsxs)("form",{onSubmit:h,className:"jsx-f5d9eb00a7c341 form",children:[(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-header",children:[(0,t.jsx)("h2",{className:"jsx-f5d9eb00a7c341",children:"create"===c?"Add New Payment":"Update Payment"}),(0,t.jsx)("p",{className:"jsx-f5d9eb00a7c341 form-description",children:"Record payment details for the employee. Fields marked with * are required."})]}),x.general&&(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 error-banner",children:[(0,t.jsx)("strong",{className:"jsx-f5d9eb00a7c341",children:"Error:"})," ",x.general]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"employee_id",className:"jsx-f5d9eb00a7c341 form-label",children:"Employee *"}),(0,t.jsxs)("select",{id:"employee_id",name:"employee_id",value:m.employee_id,onChange:u,required:!0,className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.employee_id?"error":""),children:[(0,t.jsx)("option",{value:"",className:"jsx-f5d9eb00a7c341",children:"Select Employee"}),s.map(e=>(0,t.jsxs)("option",{value:e.id,className:"jsx-f5d9eb00a7c341",children:[e.name," - ",e.designation]},e.id))]}),x.employee_id&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.employee_id}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Select the employee receiving the payment"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"amount",className:"jsx-f5d9eb00a7c341 form-label",children:"Payment Amount (₹) *"}),(0,t.jsx)("input",{type:"text",id:"amount",name:"amount",value:m.amount,onChange:e=>{let a=e.target.value,s=(a=a.replace(/[^0-9.]/g,"")).split(".");s.length>2&&(a=s[0]+"."+s.slice(1).join("")),s[1]&&s[1].length>2&&(a=s[0]+"."+s[1].substring(0,2)),b(e=>({...e,amount:a})),x.amount&&p(e=>({...e,amount:""}))},placeholder:"Enter payment amount",required:!0,className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.amount?"error":"")}),x.amount&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.amount}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Enter the payment amount in Indian Rupees (up to ₹10,00,000)"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"payment_date",className:"jsx-f5d9eb00a7c341 form-label",children:"Payment Date *"}),(0,t.jsx)("input",{type:"date",id:"payment_date",name:"payment_date",value:m.payment_date,onChange:u,max:new Date().toISOString().split("T")[0],required:!0,className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.payment_date?"error":"")}),x.payment_date&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.payment_date}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Date when the payment was made"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"payment_mode",className:"jsx-f5d9eb00a7c341 form-label",children:"Payment Mode *"}),(0,t.jsxs)("select",{id:"payment_mode",name:"payment_mode",value:m.payment_mode,onChange:u,required:!0,className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.payment_mode?"error":""),children:[(0,t.jsx)("option",{value:"",className:"jsx-f5d9eb00a7c341",children:"Select Payment Mode"}),Object.entries(d.h$).map(e=>{let[a,s]=e;return(0,t.jsx)("option",{value:s,className:"jsx-f5d9eb00a7c341",children:s},a)})]}),x.payment_mode&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.payment_mode}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Select how the payment was made"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"paid_by",className:"jsx-f5d9eb00a7c341 form-label",children:"Paid By *"}),(0,t.jsx)("input",{type:"text",id:"paid_by",name:"paid_by",value:m.paid_by,onChange:u,placeholder:"Enter name of person who made the payment",required:!0,className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.paid_by?"error":"")}),x.paid_by&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.paid_by}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Name of the person who authorized/made this payment"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-group",children:[(0,t.jsx)("label",{htmlFor:"notes",className:"jsx-f5d9eb00a7c341 form-label",children:"Notes (Optional)"}),(0,t.jsx)("textarea",{id:"notes",name:"notes",value:m.notes,onChange:u,placeholder:"Enter any additional notes about this payment",rows:"3",maxLength:"500",className:"jsx-f5d9eb00a7c341 "+"form-input ".concat(x.notes?"error":"")}),x.notes&&(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 error-message",children:x.notes}),(0,t.jsx)("div",{className:"jsx-f5d9eb00a7c341 field-hint",children:"Optional notes about the payment (max 500 characters)"})]}),(0,t.jsxs)("div",{className:"jsx-f5d9eb00a7c341 form-actions",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{i&&i()},disabled:f||l,className:"jsx-f5d9eb00a7c341 btn-secondary",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:f||l,className:"jsx-f5d9eb00a7c341 btn-primary",children:f||l?"create"===c?"Adding Payment...":"Updating Payment...":"create"===c?"Add Payment":"Update Payment"})]})]}),(0,t.jsx)(r(),{id:"f5d9eb00a7c341",children:".payment-form.jsx-f5d9eb00a7c341{max-width:600px;margin:0 auto;padding:20px}.form.jsx-f5d9eb00a7c341{background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);padding:30px}.form-header.jsx-f5d9eb00a7c341{margin-bottom:30px;text-align:center}.form-header.jsx-f5d9eb00a7c341 h2.jsx-f5d9eb00a7c341{color:#1f2937;margin-bottom:8px;font-size:1.8rem;font-weight:600}.form-description.jsx-f5d9eb00a7c341{color:#6b7280;font-size:.9rem;margin:0}.error-banner.jsx-f5d9eb00a7c341{background:#fee;border:1px solid#fcc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:12px;margin-bottom:20px;color:#c33;font-size:.9rem}.form-group.jsx-f5d9eb00a7c341{margin-bottom:20px}.form-label.jsx-f5d9eb00a7c341{display:block;margin-bottom:8px;font-weight:500;color:#374151;font-size:.9rem}.form-input.jsx-f5d9eb00a7c341{width:100%;padding:12px;border:1px solid#d1d5db;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:.9rem;-webkit-transition:border-color.2s,box-shadow.2s;-moz-transition:border-color.2s,box-shadow.2s;-o-transition:border-color.2s,box-shadow.2s;transition:border-color.2s,box-shadow.2s;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.form-input.jsx-f5d9eb00a7c341:focus{outline:none;border-color:#3b82f6;-webkit-box-shadow:0 0 0 3px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 3px rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.1)}.form-input.error.jsx-f5d9eb00a7c341{border-color:#ef4444;-webkit-box-shadow:0 0 0 3px rgba(239,68,68,.1);-moz-box-shadow:0 0 0 3px rgba(239,68,68,.1);box-shadow:0 0 0 3px rgba(239,68,68,.1)}.error-message.jsx-f5d9eb00a7c341{color:#ef4444;font-size:.8rem;margin-top:4px}.field-hint.jsx-f5d9eb00a7c341{color:#6b7280;font-size:.8rem;margin-top:4px}.form-actions.jsx-f5d9eb00a7c341{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-top:30px}.btn-primary.jsx-f5d9eb00a7c341,.btn-secondary.jsx-f5d9eb00a7c341{padding:12px 24px;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;-webkit-transition:background-color.2s,-webkit-transform.1s;-moz-transition:background-color.2s,-moz-transform.1s;-o-transition:background-color.2s,-o-transform.1s;transition:background-color.2s,-webkit-transform.1s;transition:background-color.2s,-moz-transform.1s;transition:background-color.2s,-o-transform.1s;transition:background-color.2s,transform.1s}.btn-primary.jsx-f5d9eb00a7c341{background:#3b82f6;color:white}.btn-primary.jsx-f5d9eb00a7c341:hover:not(:disabled){background:#2563eb;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-secondary.jsx-f5d9eb00a7c341{background:#f3f4f6;color:#374151;border:1px solid#d1d5db}.btn-secondary.jsx-f5d9eb00a7c341:hover:not(:disabled){background:#e5e7eb;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-primary.jsx-f5d9eb00a7c341:disabled,.btn-secondary.jsx-f5d9eb00a7c341:disabled{opacity:.6;cursor:not-allowed;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;transform:none}@media(max-width:768px){.payment-form.jsx-f5d9eb00a7c341{padding:10px}.form.jsx-f5d9eb00a7c341{padding:20px}.form-actions.jsx-f5d9eb00a7c341{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.btn-primary.jsx-f5d9eb00a7c341,.btn-secondary.jsx-f5d9eb00a7c341{width:100%}}"})]})},c=e=>{let{payments:a=[],employees:s=[],loading:o=!1,onEdit:i=null,onDelete:l=null,showActions:c=!0,showFilters:m=!0,title:b="Payment Records"}=e,x=e=>{let a=parseFloat(e)||0;return"₹".concat(a.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))},p=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}catch(e){return"Invalid Date"}},[f,j]=(0,n.useState)({employee_id:"",payment_mode:"",date_from:"",date_to:"",search:""}),[u,y]=(0,n.useState)({key:"payment_date",direction:"desc"}),h=(0,n.useMemo)(()=>e=>{let a=s.find(a=>a.id===e);return a?a.name:"Unknown Employee"},[s]),g=(0,n.useMemo)(()=>e=>{let a=s.find(a=>a.id===e);return a?a.designation:""},[s]),w=(0,n.useMemo)(()=>{let e=[...a];if(f.employee_id&&(e=e.filter(e=>e.employee_id===f.employee_id)),f.payment_mode&&(e=e.filter(e=>e.payment_mode===f.payment_mode)),f.date_from&&(e=e.filter(e=>new Date(e.payment_date)>=new Date(f.date_from))),f.date_to&&(e=e.filter(e=>new Date(e.payment_date)<=new Date(f.date_to))),f.search){let a=f.search.toLowerCase();e=e.filter(e=>{let s=h(e.employee_id).toLowerCase(),t=e.paid_by.toLowerCase(),o=(e.notes||"").toLowerCase(),r=e.amount.toString();return s.includes(a)||t.includes(a)||o.includes(a)||r.includes(a)})}return e},[a,f,h]),k=(0,n.useMemo)(()=>u.key?[...w].sort((e,a)=>{let s=e[u.key],t=a[u.key];return(("payment_date"===u.key||"created_at"===u.key)&&(s=new Date(s),t=new Date(t)),"amount"===u.key&&(s=parseFloat(s),t=parseFloat(t)),"employee_name"===u.key&&(s=h(e.employee_id),t=h(a.employee_id)),s<t)?"asc"===u.direction?-1:1:s>t?"asc"===u.direction?1:-1:0}):w,[w,u,h]),N=(0,n.useMemo)(()=>{let e=w.reduce((e,a)=>e+parseFloat(a.amount),0),a=w.length,s=w.filter(e=>e.payment_mode===d.h$.CASH),t=w.filter(e=>e.payment_mode===d.h$.ONLINE);return{totalAmount:e,totalRecords:a,cashAmount:s.reduce((e,a)=>e+parseFloat(a.amount),0),onlineAmount:t.reduce((e,a)=>e+parseFloat(a.amount),0),cashCount:s.length,onlineCount:t.length}},[w]),v=e=>{let{name:a,value:s}=e.target;j(e=>({...e,[a]:s}))},z=e=>{y(a=>({key:e,direction:a.key===e&&"asc"===a.direction?"desc":"asc"}))},_=()=>{j({employee_id:"",payment_mode:"",date_from:"",date_to:"",search:""})},C=e=>u.key!==e?"↕️":"asc"===u.direction?"↑":"↓";return(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 payment-list",children:[(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 list-header",children:[(0,t.jsx)("h2",{className:"jsx-6a044878825fbe79",children:b}),(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 list-summary",children:o?(0,t.jsx)("span",{className:"jsx-6a044878825fbe79",children:"Loading payments..."}):(0,t.jsxs)("span",{className:"jsx-6a044878825fbe79",children:["Showing ",k.length," of ",a.length," payment",1!==a.length?"s":""]})})]}),m&&(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 filters-section",children:(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filters-grid",children:[(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group",children:[(0,t.jsx)("label",{htmlFor:"employee_filter",className:"jsx-6a044878825fbe79",children:"Employee"}),(0,t.jsxs)("select",{id:"employee_filter",name:"employee_id",value:f.employee_id,onChange:v,className:"jsx-6a044878825fbe79 filter-input",children:[(0,t.jsx)("option",{value:"",className:"jsx-6a044878825fbe79",children:"All Employees"}),s.map(e=>(0,t.jsxs)("option",{value:e.id,className:"jsx-6a044878825fbe79",children:[e.name," - ",e.designation]},e.id))]})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group",children:[(0,t.jsx)("label",{htmlFor:"mode_filter",className:"jsx-6a044878825fbe79",children:"Payment Mode"}),(0,t.jsxs)("select",{id:"mode_filter",name:"payment_mode",value:f.payment_mode,onChange:v,className:"jsx-6a044878825fbe79 filter-input",children:[(0,t.jsx)("option",{value:"",className:"jsx-6a044878825fbe79",children:"All Modes"}),Object.entries(d.h$).map(e=>{let[a,s]=e;return(0,t.jsx)("option",{value:s,className:"jsx-6a044878825fbe79",children:s},a)})]})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group",children:[(0,t.jsx)("label",{htmlFor:"date_from_filter",className:"jsx-6a044878825fbe79",children:"From Date"}),(0,t.jsx)("input",{type:"date",id:"date_from_filter",name:"date_from",value:f.date_from,onChange:v,className:"jsx-6a044878825fbe79 filter-input"})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group",children:[(0,t.jsx)("label",{htmlFor:"date_to_filter",className:"jsx-6a044878825fbe79",children:"To Date"}),(0,t.jsx)("input",{type:"date",id:"date_to_filter",name:"date_to",value:f.date_to,onChange:v,className:"jsx-6a044878825fbe79 filter-input"})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group search-group",children:[(0,t.jsx)("label",{htmlFor:"search_filter",className:"jsx-6a044878825fbe79",children:"Search"}),(0,t.jsx)("input",{type:"text",id:"search_filter",name:"search",value:f.search,onChange:v,placeholder:"Search by employee, amount, or notes...",className:"jsx-6a044878825fbe79 filter-input"})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 filter-group",children:[(0,t.jsx)("label",{className:"jsx-6a044878825fbe79",children:"\xa0"}),(0,t.jsx)("button",{type:"button",onClick:_,className:"jsx-6a044878825fbe79 btn-clear-filters",children:"Clear Filters"})]})]})}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 summary-stats",children:[(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-card",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-value",children:x(N.totalAmount)}),(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-label",children:"Total Amount"})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-card",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-value",children:N.totalRecords}),(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-label",children:"Total Payments"})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-card",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-value",children:x(N.cashAmount)}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-label",children:["Cash (",N.cashCount,")"]})]}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-card",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 stat-value",children:x(N.onlineAmount)}),(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 stat-label",children:["Online (",N.onlineCount,")"]})]})]}),(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 table-container",children:o?(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 loading-state",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 loading-spinner"}),(0,t.jsx)("p",{className:"jsx-6a044878825fbe79",children:"Loading payment records..."})]}):0===k.length?(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 empty-state",children:[(0,t.jsx)("p",{className:"jsx-6a044878825fbe79",children:"No payment records found."}),Object.values(f).some(e=>e)&&(0,t.jsx)("button",{onClick:_,className:"jsx-6a044878825fbe79 btn-secondary",children:"Clear Filters"})]}):(0,t.jsxs)("table",{className:"jsx-6a044878825fbe79 payments-table",children:[(0,t.jsx)("thead",{className:"jsx-6a044878825fbe79",children:(0,t.jsxs)("tr",{className:"jsx-6a044878825fbe79",children:[(0,t.jsxs)("th",{onClick:()=>z("payment_date"),className:"jsx-6a044878825fbe79 sortable",children:["Date ",C("payment_date")]}),(0,t.jsxs)("th",{onClick:()=>z("employee_name"),className:"jsx-6a044878825fbe79 sortable",children:["Employee ",C("employee_name")]}),(0,t.jsxs)("th",{onClick:()=>z("amount"),className:"jsx-6a044878825fbe79 sortable",children:["Amount ",C("amount")]}),(0,t.jsxs)("th",{onClick:()=>z("payment_mode"),className:"jsx-6a044878825fbe79 sortable",children:["Mode ",C("payment_mode")]}),(0,t.jsxs)("th",{onClick:()=>z("paid_by"),className:"jsx-6a044878825fbe79 sortable",children:["Paid By ",C("paid_by")]}),(0,t.jsx)("th",{className:"jsx-6a044878825fbe79",children:"Notes"}),c&&(0,t.jsx)("th",{className:"jsx-6a044878825fbe79",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"jsx-6a044878825fbe79",children:k.map(e=>(0,t.jsxs)("tr",{className:"jsx-6a044878825fbe79",children:[(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 date-cell",children:p(e.payment_date)}),(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 employee-cell",children:(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 employee-info",children:[(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 employee-name",children:h(e.employee_id)}),(0,t.jsx)("div",{className:"jsx-6a044878825fbe79 employee-designation",children:g(e.employee_id)})]})}),(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 amount-cell",children:x(e.amount)}),(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 mode-cell",children:(0,t.jsx)("span",{className:"jsx-6a044878825fbe79 "+"payment-mode ".concat(e.payment_mode.toLowerCase()),children:e.payment_mode})}),(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 paid-by-cell",children:e.paid_by}),(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 notes-cell",children:e.notes&&(0,t.jsx)("div",{title:e.notes,className:"jsx-6a044878825fbe79 notes-content",children:e.notes.length>50?"".concat(e.notes.substring(0,50),"..."):e.notes})}),c&&(0,t.jsx)("td",{className:"jsx-6a044878825fbe79 actions-cell",children:(0,t.jsxs)("div",{className:"jsx-6a044878825fbe79 action-buttons",children:[i&&(0,t.jsx)("button",{onClick:()=>i(e),title:"Edit Payment",className:"jsx-6a044878825fbe79 btn-action btn-edit",children:"✏️"}),l&&(0,t.jsx)("button",{onClick:()=>l(e),title:"Delete Payment",className:"jsx-6a044878825fbe79 btn-action btn-delete",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})}),(0,t.jsx)(r(),{id:"6a044878825fbe79",children:".payment-list.jsx-6a044878825fbe79{background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);padding:20px}.list-header.jsx-6a044878825fbe79{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid#e5e7eb}.list-header.jsx-6a044878825fbe79 h2.jsx-6a044878825fbe79{color:#1f2937;margin:0;font-size:1.5rem;font-weight:600}.list-summary.jsx-6a044878825fbe79{color:#6b7280;font-size:.9rem}.filters-section.jsx-6a044878825fbe79{margin-bottom:25px;padding:20px;background:#f9fafb;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.filters-grid.jsx-6a044878825fbe79{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.search-group.jsx-6a044878825fbe79{grid-column:span 2}.filter-group.jsx-6a044878825fbe79{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.filter-group.jsx-6a044878825fbe79 label.jsx-6a044878825fbe79{font-size:.85rem;font-weight:500;color:#374151;margin-bottom:5px}.filter-input.jsx-6a044878825fbe79{padding:8px 12px;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:.9rem}.filter-input.jsx-6a044878825fbe79:focus{outline:none;border-color:#3b82f6;-webkit-box-shadow:0 0 0 2px rgba(59,130,246,.1);-moz-box-shadow:0 0 0 2px rgba(59,130,246,.1);box-shadow:0 0 0 2px rgba(59,130,246,.1)}.btn-clear-filters.jsx-6a044878825fbe79{padding:8px 16px;background:#f3f4f6;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;color:#374151;font-size:.9rem;cursor:pointer;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.btn-clear-filters.jsx-6a044878825fbe79:hover{background:#e5e7eb}.summary-stats.jsx-6a044878825fbe79{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:25px}.stat-card.jsx-6a044878825fbe79{background:#f8fafc;padding:15px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;text-align:center;border:1px solid#e2e8f0}.stat-value.jsx-6a044878825fbe79{font-size:1.2rem;font-weight:600;color:#1f2937;margin-bottom:4px}.stat-label.jsx-6a044878825fbe79{font-size:.8rem;color:#6b7280}.table-container.jsx-6a044878825fbe79{overflow-x:auto}.payments-table.jsx-6a044878825fbe79{width:100%;border-collapse:collapse;font-size:.9rem}.payments-table.jsx-6a044878825fbe79 th.jsx-6a044878825fbe79,.payments-table.jsx-6a044878825fbe79 td.jsx-6a044878825fbe79{padding:12px;text-align:left;border-bottom:1px solid#e5e7eb}.payments-table.jsx-6a044878825fbe79 th.jsx-6a044878825fbe79{background:#f9fafb;font-weight:600;color:#374151;position:-webkit-sticky;position:sticky;top:0}.sortable.jsx-6a044878825fbe79{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.sortable.jsx-6a044878825fbe79:hover{background:#f3f4f6}.date-cell.jsx-6a044878825fbe79{white-space:nowrap}.employee-cell.jsx-6a044878825fbe79{min-width:150px}.employee-info.jsx-6a044878825fbe79{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.employee-name.jsx-6a044878825fbe79{font-weight:500;color:#1f2937}.employee-designation.jsx-6a044878825fbe79{font-size:.8rem;color:#6b7280}.amount-cell.jsx-6a044878825fbe79{font-weight:600;color:#059669;text-align:right}.payment-mode.jsx-6a044878825fbe79{padding:4px 8px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;font-size:.8rem;font-weight:500}.payment-mode.cash.jsx-6a044878825fbe79{background:#dcfce7;color:#166534}.payment-mode.online.jsx-6a044878825fbe79{background:#dbeafe;color:#1d4ed8}.notes-cell.jsx-6a044878825fbe79{max-width:200px}.notes-content.jsx-6a044878825fbe79{color:#6b7280;font-size:.85rem;line-height:1.4}.actions-cell.jsx-6a044878825fbe79{white-space:nowrap}.action-buttons.jsx-6a044878825fbe79{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.btn-action.jsx-6a044878825fbe79{padding:6px 8px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:.9rem;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.btn-edit.jsx-6a044878825fbe79{background:#fef3c7;color:#92400e}.btn-edit.jsx-6a044878825fbe79:hover{background:#fcd34d}.btn-delete.jsx-6a044878825fbe79{background:#fee2e2;color:#dc2626}.btn-delete.jsx-6a044878825fbe79:hover{background:#fca5a5}.loading-state.jsx-6a044878825fbe79,.empty-state.jsx-6a044878825fbe79{text-align:center;padding:40px 20px;color:#6b7280}.loading-spinner.jsx-6a044878825fbe79{width:24px;height:24px;border:2px solid#e5e7eb;border-top:2px solid#3b82f6;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin:0 auto 15px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.btn-secondary.jsx-6a044878825fbe79{padding:8px 16px;background:#f3f4f6;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;color:#374151;cursor:pointer;margin-top:10px}.btn-secondary.jsx-6a044878825fbe79:hover{background:#e5e7eb}@media(max-width:768px){.filters-grid.jsx-6a044878825fbe79{grid-template-columns:1fr}.search-group.jsx-6a044878825fbe79{grid-column:span 1}.summary-stats.jsx-6a044878825fbe79{grid-template-columns:repeat(2,1fr)}.payments-table.jsx-6a044878825fbe79{font-size:.8rem}.payments-table.jsx-6a044878825fbe79 th.jsx-6a044878825fbe79,.payments-table.jsx-6a044878825fbe79 td.jsx-6a044878825fbe79{padding:8px}}"})]})},m=s(5430),b=s(8804);function x(){let e=(0,i.useRouter)(),[a,s]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[x,p]=(0,n.useState)(!0),[f,j]=(0,n.useState)(!1),[u,y]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[w,k]=(0,n.useState)(""),[N,v]=(0,n.useState)("");(0,n.useEffect)(()=>{z()},[]);let z=async()=>{try{p(!0),k("");let[e,a]=await Promise.all([m.Z.getAllPayments(),b.Z.getAllEmployees()]);s(e),d(a)}catch(e){console.error("Error loading data:",e),k("Failed to load data: ".concat(e.message))}finally{p(!1)}},_=async e=>{try{j(!0),k("");let a=await m.Z.createPayment(e);s(e=>[a,...e]),y(!1),v("Payment record created successfully!"),setTimeout(()=>v(""),3e3)}catch(e){throw console.error("Error creating payment:",e),e}finally{j(!1)}},C=async e=>{try{j(!0),k("");let a=await m.Z.updatePayment(h.id,e);s(e=>e.map(e=>e.id===h.id?a:e)),y(!1),g(null),v("Payment record updated successfully!"),setTimeout(()=>v(""),3e3)}catch(e){throw console.error("Error updating payment:",e),e}finally{j(!1)}},S=async e=>{if(window.confirm("Are you sure you want to delete this payment record?\n\nEmployee: ".concat(E(e.employee_id),"\nAmount: ₹").concat(e.amount,"\nDate: ").concat(P(e.payment_date),"\n\nThis action cannot be undone.")))try{k(""),await m.Z.deletePayment(e.id),s(a=>a.filter(a=>a.id!==e.id)),v("Payment record deleted successfully!"),setTimeout(()=>v(""),3e3)}catch(e){console.error("Error deleting payment:",e),k("Failed to delete payment: ".concat(e.message))}},E=e=>{let a=o.find(a=>a.id===e);return a?a.name:"Unknown Employee"},P=e=>e?new Date(e).toLocaleDateString("en-IN"):"";return(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 payment-management",children:[(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 page-header",children:[(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 header-content",children:[(0,t.jsx)("h1",{className:"jsx-2ec296a52bc9a373",children:"Payment Management"}),(0,t.jsx)("p",{className:"jsx-2ec296a52bc9a373 page-description",children:"Manage employee payments, track payment history, and generate reports."})]}),(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 header-actions",children:[(0,t.jsx)("button",{onClick:()=>e.push("/employees"),className:"jsx-2ec296a52bc9a373 btn-secondary",children:"Manage Employees"}),(0,t.jsx)("button",{onClick:()=>{g(null),y(!0)},disabled:x,className:"jsx-2ec296a52bc9a373 btn-primary",children:"Add Payment"})]})]}),w&&(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 message-banner error-banner",children:[(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 message-content",children:[(0,t.jsx)("strong",{className:"jsx-2ec296a52bc9a373",children:"Error:"})," ",w]}),(0,t.jsx)("button",{onClick:()=>{k("")},className:"jsx-2ec296a52bc9a373 message-close",children:"\xd7"})]}),N&&(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 message-banner success-banner",children:[(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 message-content",children:[(0,t.jsx)("strong",{className:"jsx-2ec296a52bc9a373",children:"Success:"})," ",N]}),(0,t.jsx)("button",{onClick:()=>{v("")},className:"jsx-2ec296a52bc9a373 message-close",children:"\xd7"})]}),(0,t.jsx)("div",{className:"jsx-2ec296a52bc9a373 main-content",children:u?(0,t.jsx)("div",{className:"jsx-2ec296a52bc9a373 form-section",children:(0,t.jsx)(l,{initialData:h,employees:o,onSubmit:h?C:_,onCancel:()=>{y(!1),g(null)},loading:f,mode:h?"update":"create"})}):(0,t.jsx)("div",{className:"jsx-2ec296a52bc9a373 list-section",children:(0,t.jsx)(c,{payments:a,employees:o,loading:x,onEdit:e=>{g(e),y(!0)},onDelete:S,showActions:!0,showFilters:!0,title:"Payment Records"})})}),x&&(0,t.jsxs)("div",{className:"jsx-2ec296a52bc9a373 loading-overlay",children:[(0,t.jsx)("div",{className:"jsx-2ec296a52bc9a373 loading-spinner"}),(0,t.jsx)("p",{className:"jsx-2ec296a52bc9a373",children:"Loading payment data..."})]}),(0,t.jsx)(r(),{id:"2ec296a52bc9a373",children:".payment-management.jsx-2ec296a52bc9a373{min-height:100vh;background:#f8fafc;padding:20px}.page-header.jsx-2ec296a52bc9a373{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;margin-bottom:30px;background:white;padding:25px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.header-content.jsx-2ec296a52bc9a373 h1.jsx-2ec296a52bc9a373{color:#1f2937;margin:0 0 8px 0;font-size:2rem;font-weight:700}.page-description.jsx-2ec296a52bc9a373{color:#6b7280;margin:0;font-size:1rem;line-height:1.5}.header-actions.jsx-2ec296a52bc9a373{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.btn-primary.jsx-2ec296a52bc9a373,.btn-secondary.jsx-2ec296a52bc9a373{padding:12px 24px;border:none;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:.9rem;font-weight:500;cursor:pointer;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s;white-space:nowrap}.btn-primary.jsx-2ec296a52bc9a373{background:#3b82f6;color:white}.btn-primary.jsx-2ec296a52bc9a373:hover:not(:disabled){background:#2563eb;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-secondary.jsx-2ec296a52bc9a373{background:#f3f4f6;color:#374151;border:1px solid#d1d5db}.btn-secondary.jsx-2ec296a52bc9a373:hover:not(:disabled){background:#e5e7eb;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-primary.jsx-2ec296a52bc9a373:disabled,.btn-secondary.jsx-2ec296a52bc9a373:disabled{opacity:.6;cursor:not-allowed;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;transform:none}.message-banner.jsx-2ec296a52bc9a373{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 20px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:20px;font-size:.9rem}.error-banner.jsx-2ec296a52bc9a373{background:#fef2f2;border:1px solid#fecaca;color:#dc2626}.success-banner.jsx-2ec296a52bc9a373{background:#f0fdf4;border:1px solid#bbf7d0;color:#166534}.message-content.jsx-2ec296a52bc9a373{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.message-close.jsx-2ec296a52bc9a373{background:none;border:none;font-size:1.2rem;cursor:pointer;color:inherit;opacity:.7;-webkit-transition:opacity.2s;-moz-transition:opacity.2s;-o-transition:opacity.2s;transition:opacity.2s}.message-close.jsx-2ec296a52bc9a373:hover{opacity:1}.main-content.jsx-2ec296a52bc9a373{max-width:1200px;margin:0 auto}.form-section.jsx-2ec296a52bc9a373,.list-section.jsx-2ec296a52bc9a373{background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.loading-overlay.jsx-2ec296a52bc9a373{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;z-index:1000;color:white}.loading-spinner.jsx-2ec296a52bc9a373{width:40px;height:40px;border:3px solid rgba(255,255,255,.3);border-top:3px solid white;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-bottom:15px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.loading-overlay.jsx-2ec296a52bc9a373 p.jsx-2ec296a52bc9a373{font-size:1.1rem;margin:0}@media(max-width:768px){.payment-management.jsx-2ec296a52bc9a373{padding:10px}.page-header.jsx-2ec296a52bc9a373{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:20px;padding:20px}.header-actions.jsx-2ec296a52bc9a373{width:100%;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-moz-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch}.btn-primary.jsx-2ec296a52bc9a373,.btn-secondary.jsx-2ec296a52bc9a373{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.header-content.jsx-2ec296a52bc9a373 h1.jsx-2ec296a52bc9a373{font-size:1.5rem}}@media(max-width:480px){.header-actions.jsx-2ec296a52bc9a373{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.btn-primary.jsx-2ec296a52bc9a373,.btn-secondary.jsx-2ec296a52bc9a373{width:100%}}"})]})}}},function(e){e.O(0,[354,582,888,774,179],function(){return e(e.s=6557)}),_N_E=e.O()}]);