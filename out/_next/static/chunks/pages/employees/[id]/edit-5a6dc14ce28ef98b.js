(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{1844:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employees/[id]/edit",function(){return r(7502)}])},4154:function(e,a,r){"use strict";var o=r(5893),s=r(645),n=r.n(s),i=r(7294),t=r(4069);a.Z=e=>{let{initialData:a=null,onSubmit:r,onCancel:s,loading:c=!1,mode:d="create"}=e,[l,x]=(0,i.useState)((0,t.CW)()),[m,f]=(0,i.useState)({}),[b,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a?x({name:a.name||"",aadhar_id:a.aadhar_id||"",joining_date:a.joining_date?"string"==typeof a.joining_date?a.joining_date:a.joining_date.toISOString().split("T")[0]:"",age:a.age||""}):x((0,t.CW)())},[a]);let j=e=>{let{name:a,value:r}=e.target;x(e=>({...e,[a]:r})),m[a]&&f(e=>({...e,[a]:""}))},g=()=>{let e=(0,t.uO)(l);return f(e.errors),e.isValid},h=async e=>{if(e.preventDefault(),g()){p(!0);try{await r(l)}catch(e){console.error("Form submission error:",e),e.message.includes("Validation failed:")?f({general:e.message.replace("Validation failed:","").trim()}):e.message.includes("Aadhar ID already exists")?f({aadhar_id:"This Aadhar ID is already registered with another employee"}):f({general:e.message||"An error occurred while saving employee data"})}finally{p(!1)}}};return(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 employee-form",children:[(0,o.jsxs)("form",{onSubmit:h,className:"jsx-5239f07a3641fe55 form",children:[(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-header",children:[(0,o.jsx)("h2",{className:"jsx-5239f07a3641fe55",children:"create"===d?"Add New Employee":"Update Employee"}),(0,o.jsx)("p",{className:"jsx-5239f07a3641fe55 form-description",children:"Fill in the employee details below. Fields marked with * are required."})]}),m.general&&(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 error-banner",children:[(0,o.jsx)("strong",{className:"jsx-5239f07a3641fe55",children:"Error:"})," ",m.general]}),(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-group",children:[(0,o.jsx)("label",{htmlFor:"name",className:"jsx-5239f07a3641fe55 form-label",children:"Full Name *"}),(0,o.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:j,placeholder:"Enter employee's full name",required:!0,className:"jsx-5239f07a3641fe55 "+"form-input ".concat(m.name?"error":"")}),m.name&&(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 error-message",children:m.name})]}),(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-group",children:[(0,o.jsx)("label",{htmlFor:"aadhar_id",className:"jsx-5239f07a3641fe55 form-label",children:"Aadhar ID (Optional)"}),(0,o.jsx)("input",{type:"text",id:"aadhar_id",name:"aadhar_id",value:l.aadhar_id,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length>12&&(a=a.substring(0,12)),x(e=>({...e,aadhar_id:a})),m.aadhar_id&&f(e=>({...e,aadhar_id:""}))},placeholder:"Enter 12-digit Aadhar number",maxLength:"12",className:"jsx-5239f07a3641fe55 "+"form-input ".concat(m.aadhar_id?"error":"")}),m.aadhar_id&&(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 error-message",children:m.aadhar_id}),(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 field-hint",children:"12-digit Aadhar number (optional but recommended for verification)"})]}),(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-group",children:[(0,o.jsx)("label",{htmlFor:"joining_date",className:"jsx-5239f07a3641fe55 form-label",children:"Joining Date *"}),(0,o.jsx)("input",{type:"date",id:"joining_date",name:"joining_date",value:l.joining_date,onChange:j,max:new Date().toISOString().split("T")[0],required:!0,className:"jsx-5239f07a3641fe55 "+"form-input ".concat(m.joining_date?"error":"")}),m.joining_date&&(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 error-message",children:m.joining_date}),(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 field-hint",children:"Date when employee joined the organization"})]}),(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-group",children:[(0,o.jsx)("label",{htmlFor:"age",className:"jsx-5239f07a3641fe55 form-label",children:"Age (Optional)"}),(0,o.jsx)("input",{type:"text",id:"age",name:"age",value:l.age,onChange:e=>{let a=e.target.value.replace(/\D/g,"");a.length>2&&(a=a.substring(0,2)),x(e=>({...e,age:a})),m.age&&f(e=>({...e,age:""}))},placeholder:"Enter age in years",maxLength:"2",className:"jsx-5239f07a3641fe55 "+"form-input ".concat(m.age?"error":"")}),m.age&&(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 error-message",children:m.age}),(0,o.jsx)("div",{className:"jsx-5239f07a3641fe55 field-hint",children:"Age in years (18-65)"})]}),(0,o.jsxs)("div",{className:"jsx-5239f07a3641fe55 form-actions",children:[(0,o.jsx)("button",{type:"button",onClick:()=>{s&&s()},disabled:b||c,className:"jsx-5239f07a3641fe55 btn-secondary",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:b||c,className:"jsx-5239f07a3641fe55 btn-primary",children:b||c?"create"===d?"Adding Employee...":"Updating Employee...":"create"===d?"Add Employee":"Update Employee"})]})]}),(0,o.jsx)(n(),{id:"5239f07a3641fe55",children:".employee-form.jsx-5239f07a3641fe55{max-width:600px;margin:0 auto;padding:20px}.form.jsx-5239f07a3641fe55{background:white;padding:30px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.1);-moz-box-shadow:0 2px 10px rgba(0,0,0,.1);box-shadow:0 2px 10px rgba(0,0,0,.1)}.form-header.jsx-5239f07a3641fe55{margin-bottom:30px;text-align:center}.form-header.jsx-5239f07a3641fe55 h2.jsx-5239f07a3641fe55{margin:0 0 10px 0;color:#333;font-size:1.5rem}.form-description.jsx-5239f07a3641fe55{margin:0;color:#666;font-size:.9rem}.error-banner.jsx-5239f07a3641fe55{background:#fee;color:#c33;padding:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-bottom:20px;border:1px solid#fcc}.form-group.jsx-5239f07a3641fe55{margin-bottom:20px}.form-label.jsx-5239f07a3641fe55{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:.9rem}.form-input.jsx-5239f07a3641fe55{width:100%;padding:12px;border:1px solid#ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;-webkit-transition:border-color.2s,box-shadow.2s;-moz-transition:border-color.2s,box-shadow.2s;-o-transition:border-color.2s,box-shadow.2s;transition:border-color.2s,box-shadow.2s}.form-input.jsx-5239f07a3641fe55:focus{outline:none;border-color:#007cba;-webkit-box-shadow:0 0 0 2px rgba(0,124,186,.2);-moz-box-shadow:0 0 0 2px rgba(0,124,186,.2);box-shadow:0 0 0 2px rgba(0,124,186,.2)}.form-input.error.jsx-5239f07a3641fe55{border-color:#dc3545}.form-input.error.jsx-5239f07a3641fe55:focus{border-color:#dc3545;-webkit-box-shadow:0 0 0 2px rgba(220,53,69,.2);-moz-box-shadow:0 0 0 2px rgba(220,53,69,.2);box-shadow:0 0 0 2px rgba(220,53,69,.2)}.error-message.jsx-5239f07a3641fe55{color:#dc3545;font-size:.8rem;margin-top:4px}.field-hint.jsx-5239f07a3641fe55{color:#666;font-size:.8rem;margin-top:4px}.form-actions.jsx-5239f07a3641fe55{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:12px;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid#eee}.btn-primary.jsx-5239f07a3641fe55,.btn-secondary.jsx-5239f07a3641fe55{padding:12px 24px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;-webkit-transition:background-color.2s,-webkit-transform.1s;-moz-transition:background-color.2s,-moz-transform.1s;-o-transition:background-color.2s,-o-transform.1s;transition:background-color.2s,-webkit-transform.1s;transition:background-color.2s,-moz-transform.1s;transition:background-color.2s,-o-transform.1s;transition:background-color.2s,transform.1s}.btn-primary.jsx-5239f07a3641fe55{background:#007cba;color:white}.btn-primary.jsx-5239f07a3641fe55:hover:not(:disabled){background:#005a87;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-secondary.jsx-5239f07a3641fe55{background:#f8f9fa;color:#666;border:1px solid#ddd}.btn-secondary.jsx-5239f07a3641fe55:hover:not(:disabled){background:#e9ecef;-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px)}.btn-primary.jsx-5239f07a3641fe55:disabled,.btn-secondary.jsx-5239f07a3641fe55:disabled{opacity:.6;cursor:not-allowed;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;transform:none}@media(max-width:768px){.employee-form.jsx-5239f07a3641fe55{padding:10px}.form.jsx-5239f07a3641fe55{padding:20px}.form-actions.jsx-5239f07a3641fe55{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.btn-primary.jsx-5239f07a3641fe55,.btn-secondary.jsx-5239f07a3641fe55{width:100%}}"})]})}},7502:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return b}});var o=r(5893),s=r(645),n=r.n(s),i=r(7294),t=r(1163),c=r(6838),d=r(4154),l=r(5006),x=r(8804),m=r(1664),f=r.n(m);function b(){let[e,a]=(0,i.useState)(null),[r,s]=(0,i.useState)(!0),[m,b]=(0,i.useState)(!1),[p,j]=(0,i.useState)(null),g=(0,t.useRouter)(),{id:h}=g.query;(0,i.useEffect)(()=>{h&&u(h)},[h]);let u=async e=>{try{s(!0),j(null);let r=await x.Z.getEmployee(e);if(!r){j("Employee not found");return}a(r)}catch(e){console.error("Error loading employee:",e),j(e.message||"Failed to load employee data")}finally{s(!1)}},y=async e=>{try{b(!0),await x.Z.updateEmployee(h,e),alert('Employee "'.concat(e.name,'" has been successfully updated!')),g.push("/employees")}catch(e){throw console.error("Error updating employee:",e),e}finally{b(!1)}};return r?(0,o.jsx)(c.Z,{title:"Edit Employee - AmitojInfra",description:"Edit employee information",children:(0,o.jsx)(l.Z,{children:(0,o.jsxs)("div",{className:"loading-page",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Loading employee data..."})]})})}):p?(0,o.jsx)(c.Z,{title:"Edit Employee - AmitojInfra",description:"Edit employee information",children:(0,o.jsx)(l.Z,{children:(0,o.jsx)("div",{className:"error-page",children:(0,o.jsxs)("div",{className:"error-content",children:[(0,o.jsx)("h1",{children:"Error Loading Employee"}),(0,o.jsx)("p",{children:p}),(0,o.jsxs)("div",{className:"error-actions",children:[(0,o.jsx)("button",{onClick:()=>u(h),className:"retry-btn",children:"Try Again"}),(0,o.jsx)(f(),{href:"/employees",className:"back-btn",children:"Back to Employees"})]})]})})})}):e?(0,o.jsxs)(c.Z,{title:"Edit ".concat(e.name," - AmitojInfra"),description:"Edit employee information",children:[(0,o.jsx)(l.Z,{children:(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa edit-employee-page",children:[(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa page-header",children:[(0,o.jsx)("div",{className:"jsx-1914019c11c0abaa breadcrumb",children:(0,o.jsx)(f(),{href:"/employees",className:"breadcrumb-link",children:"← Back to Employees"})}),(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa header-content",children:[(0,o.jsx)("h1",{className:"jsx-1914019c11c0abaa",children:"Edit Employee"}),(0,o.jsxs)("p",{className:"jsx-1914019c11c0abaa",children:["Update information for ",(0,o.jsx)("strong",{className:"jsx-1914019c11c0abaa",children:e.name})]})]})]}),(0,o.jsx)("div",{className:"jsx-1914019c11c0abaa employee-info-card",children:(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa info-grid",children:[(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa info-item",children:[(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-label",children:"Employee ID:"}),(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-value",children:e.id})]}),(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa info-item",children:[(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-label",children:"Added on:"}),(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-value",children:e.createdAt?new Date(e.createdAt.seconds?1e3*e.createdAt.seconds:e.createdAt).toLocaleDateString():"Unknown"})]}),e.updatedAt&&(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa info-item",children:[(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-label",children:"Last updated:"}),(0,o.jsx)("span",{className:"jsx-1914019c11c0abaa info-value",children:new Date(e.updatedAt.seconds?1e3*e.updatedAt.seconds:e.updatedAt).toLocaleDateString()})]})]})}),(0,o.jsx)("div",{className:"jsx-1914019c11c0abaa form-section",children:(0,o.jsx)(d.Z,{initialData:e,mode:"update",onSubmit:y,onCancel:()=>{g.push("/employees")},loading:m})}),(0,o.jsx)("div",{className:"jsx-1914019c11c0abaa warning-section",children:(0,o.jsxs)("div",{className:"jsx-1914019c11c0abaa warning-card",children:[(0,o.jsx)("h3",{className:"jsx-1914019c11c0abaa",children:"⚠️ Important Notes"}),(0,o.jsxs)("ul",{className:"jsx-1914019c11c0abaa",children:[(0,o.jsx)("li",{className:"jsx-1914019c11c0abaa",children:'Changes will be saved immediately after clicking "Update Employee"'}),(0,o.jsx)("li",{className:"jsx-1914019c11c0abaa",children:"If you change the Aadhar ID, make sure it doesn't conflict with another employee"}),(0,o.jsx)("li",{className:"jsx-1914019c11c0abaa",children:"Employee ID cannot be changed once created"}),(0,o.jsx)("li",{className:"jsx-1914019c11c0abaa",children:"All changes are logged and tracked for audit purposes"})]})]})})]})}),(0,o.jsx)(n(),{id:"1914019c11c0abaa",children:".edit-employee-page.jsx-1914019c11c0abaa{max-width:1e3px;margin:0 auto;padding:20px}.loading-page.jsx-1914019c11c0abaa,.error-page.jsx-1914019c11c0abaa,.not-found-page.jsx-1914019c11c0abaa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;min-height:400px;text-align:center;color:#666}.loading-spinner.jsx-1914019c11c0abaa{width:40px;height:40px;border:4px solid#f3f3f3;border-top:4px solid#007cba;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-bottom:20px}.error-content.jsx-1914019c11c0abaa,.not-found-content.jsx-1914019c11c0abaa{max-width:400px}.error-content.jsx-1914019c11c0abaa h1.jsx-1914019c11c0abaa,.not-found-content.jsx-1914019c11c0abaa h1.jsx-1914019c11c0abaa{color:#dc3545;margin-bottom:15px}.error-actions.jsx-1914019c11c0abaa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:10px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:20px}.retry-btn.jsx-1914019c11c0abaa,.back-btn.jsx-1914019c11c0abaa{padding:10px 20px;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;cursor:pointer;text-decoration:none;display:inline-block}.retry-btn.jsx-1914019c11c0abaa{background:#007cba;color:white}.retry-btn.jsx-1914019c11c0abaa:hover{background:#005a87}.back-btn.jsx-1914019c11c0abaa{background:#6c757d;color:white}.back-btn.jsx-1914019c11c0abaa:hover{background:#5a6268}.page-header.jsx-1914019c11c0abaa{margin-bottom:30px}.breadcrumb.jsx-1914019c11c0abaa{margin-bottom:15px}.breadcrumb-link.jsx-1914019c11c0abaa{color:#007cba;text-decoration:none;font-size:14px;font-weight:500}.breadcrumb-link.jsx-1914019c11c0abaa:hover{text-decoration:underline}.header-content.jsx-1914019c11c0abaa h1.jsx-1914019c11c0abaa{margin:0 0 8px 0;color:#1f2937;font-size:1.8rem}.header-content.jsx-1914019c11c0abaa p.jsx-1914019c11c0abaa{margin:0;color:#6b7280;font-size:1rem}.employee-info-card.jsx-1914019c11c0abaa{background:white;padding:20px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;border-left:4px solid#17a2b8}.info-grid.jsx-1914019c11c0abaa{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.info-item.jsx-1914019c11c0abaa{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:8px 0}.info-label.jsx-1914019c11c0abaa{font-weight:500;color:#6b7280;font-size:.9rem}.info-value.jsx-1914019c11c0abaa{font-weight:500;color:#374151;font-size:.9rem}.form-section.jsx-1914019c11c0abaa{margin-bottom:40px}.warning-section.jsx-1914019c11c0abaa{margin-top:40px}.warning-card.jsx-1914019c11c0abaa{background:#fff3cd;padding:20px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#ffeaa7;border-left:4px solid#ffc107}.warning-card.jsx-1914019c11c0abaa h3.jsx-1914019c11c0abaa{margin:0 0 15px 0;color:#856404;font-size:1rem}.warning-card.jsx-1914019c11c0abaa ul.jsx-1914019c11c0abaa{margin:0;padding-left:20px}.warning-card.jsx-1914019c11c0abaa li.jsx-1914019c11c0abaa{margin-bottom:8px;color:#856404;font-size:.9rem;line-height:1.4}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@media(max-width:768px){.edit-employee-page.jsx-1914019c11c0abaa{padding:10px}.info-grid.jsx-1914019c11c0abaa{grid-template-columns:1fr}.info-item.jsx-1914019c11c0abaa{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;gap:4px}.header-content.jsx-1914019c11c0abaa h1.jsx-1914019c11c0abaa{font-size:1.5rem}.error-actions.jsx-1914019c11c0abaa{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}"})]}):(0,o.jsx)(c.Z,{title:"Employee Not Found - AmitojInfra",description:"Employee not found",children:(0,o.jsx)(l.Z,{children:(0,o.jsx)("div",{className:"not-found-page",children:(0,o.jsxs)("div",{className:"not-found-content",children:[(0,o.jsx)("h1",{children:"Employee Not Found"}),(0,o.jsx)("p",{children:"The employee you're looking for doesn't exist or may have been deleted."}),(0,o.jsx)(f(),{href:"/employees",className:"back-btn",children:"Back to Employees"})]})})})})}}},function(e){e.O(0,[675,347,804,888,774,179],function(){return e(e.s=1844)}),_N_E=e.O()}]);